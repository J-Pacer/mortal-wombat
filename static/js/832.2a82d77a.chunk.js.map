{"version":3,"file":"static/js/832.2a82d77a.chunk.js","mappings":"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","sources":["Components/ErrorBanner.js","utils.js","hooks/useErrors.js","Components/Login.js","hooks/useUserIndex.js","Components/Toolbar.js","hooks/useCursors.js","Components/Cursors.js","Components/WorldEditor.js","hooks/useCoords.js","Components/Nav.js","Components/common/FormThing.js","Components/TileTypeEditor.js","hooks/useStatePersist.js","Components/GameConfig.js","hooks/useLocationHash.js","Components/common/Pane.js","Components/HereNow.js","Components/App.js","utils/makeButtons.js","hooks/useUser.js","hooks/useTileTypes.js","hooks/useWorld.js","editorMain.js","firebase.js","utils/getBackground.js"],"sourcesContent":["import './errorBanner.css';\n\nexport const ErrorBanner = ({errors, clearError}) =>\n  Object.keys(errors).length > 0 && (\n    <div className=\"errorBanner\">\n      {Object.entries(errors).map(([key, err]) => (\n        <div key={key}>\n          {err} <a onClick={() => clearError(key)}>[x]</a>\n        </div>\n      ))}\n    </div>\n  );\n","// export const assocPath = ([first, ...rest], val, obj) => {\n//   const copy = Array.isArray(obj) ? [...obj] : {...obj};\n//   copy[first] = rest.length ? assocPath(rest, val, copy[first]) : val;\n//   return copy;\n// };\n\nexport const dissoc = (key, obj) => {\n  const copy = {...obj};\n  delete copy[key];\n  return copy;\n};\n\nexport const guid = () =>\n  Date.now().toString(36) + ':' + Math.random().toString(36).slice(2);\n\nexport const groupBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) {\n    const key = func(el);\n    (res[key] = res[key] || []).push(el);\n  }\n  return res;\n};\n\nexport const indexBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) res[func(el)] = el;\n  return res;\n};\n\nexport const objToArr = (obj = {}) =>\n  Object.entries(obj).map(([key, el]) => ({key, ...el}));\n\nexport const debounce = (func, delay) => {\n  let timeout;\n  const f = (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\nexport const throttle = (func, delay) => {\n  let timeout;\n  let running = false;\n  let runAgainArgs;\n  const f = (...args) => {\n    if (running) {\n      runAgainArgs = args;\n      return;\n    }\n    running = true;\n    timeout = setTimeout(() => {\n      func(...args);\n      running = false;\n      if (runAgainArgs) {\n        f(...runAgainArgs);\n      }\n      runAgainArgs = undefined;\n    }, delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\n// const memoize = (func) => {\n//   const cache = {};\n//   return (...args) => {\n//     const key = JSON.stringify(args);\n//     if (cache[key] === undefined) cache[key] = func(...args);\n//     return cache[key];\n//   };\n// };\n","import {useState} from 'react';\nimport {dissoc, guid} from '../utils';\n\nexport const useErrors = () => {\n  const [errors, setErrors] = useState({});\n  const onError = (msg) => {\n    setErrors((e) => ({...e, [guid()]: msg}));\n  };\n  const clearError = (key) => setErrors((e) => dissoc(key, e));\n  return [errors, onError, clearError];\n};\n","import {useState} from 'react';\nimport {logIn} from '../firebase';\nimport './login.css';\n\nexport const Login = ({onError}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <div style={{width: 300, margin: '50px auto'}}>\n      <form\n        className=\"login\"\n        onSubmit={async (e) => {\n          e.preventDefault();\n          try {\n            await logIn(email, password);\n          } catch (e) {\n            onError(e.message);\n          }\n        }}\n      >\n        {/* <h1>Log In</h1> */}\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button style={{width: '100%'}}>Log In</button>\n      </form>\n\n      {/* <div style={{margin: '30px 0'}}>or</div>\n\n      <form\n        className=\"login\"\n        onSubmit={async (e) => {\n          e.preventDefault();\n          try {\n            await logIn(email, password);\n          } catch (e) {\n            onError(e.message);\n          }\n        }}\n      >\n        <h1>Register</h1>\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button>Register</button>\n      </form> */}\n    </div>\n  );\n};\n","import {useEffect, useState} from 'react';\nimport {indexBy} from '../utils';\nimport {listen} from '../firebase';\n\nconst indexUsers = (users) => indexBy((u) => u.email, Object.values(users));\n\nexport const useUserIndex = (onError) => {\n  const [userIndex, setUserIndex] = useState({});\n  useEffect(\n    () => listen('users', (users) => setUserIndex(indexUsers(users)), onError),\n    []\n  );\n  return userIndex;\n};\n","import {getBackground} from '../utils/getBackground';\nimport './toolbar.css';\n\nexport const Toolbar = ({\n  tileTypes,\n  selectedTileTypeId,\n  setSelectedTileTypeId,\n  showTileTypeEditor,\n  setShowTileTypeEditor,\n}) => (\n  <div className=\"toolBar\">\n    {Object.values(tileTypes)\n      .sort((a, b) => a.order - b.order)\n      .map((type) => (\n        <div\n          key={type.label}\n          className={\n            'tileType' + (selectedTileTypeId === type.id ? ' selected' : '')\n          }\n          style={{background: getBackground(type)}}\n          title={\n            showTileTypeEditor ? '' : 'Double click to edit tile properties.'\n          }\n          onClick={() => {\n            setShowTileTypeEditor(false);\n            setSelectedTileTypeId(type.id);\n          }}\n          onDoubleClick={() =>\n            type.id && !type.id.startsWith('_') && setShowTileTypeEditor(true)\n          }\n        >\n          <label>{type.label}</label>\n        </div>\n      ))}\n  </div>\n);\n","import {serverTimestamp} from 'firebase/database';\nimport {useEffect, useState} from 'react';\nimport {listen, update} from '../firebase';\nimport {guid, throttle} from '../utils';\n\nexport const sessionTimeOut = 15 * 1000;\nexport const sessionId = guid();\n\nexport const getLatestTimestamp = (cursors) => {\n  let latestTimestamp = 0;\n  for (const key in cursors) {\n    latestTimestamp = Math.max(latestTimestamp, cursors[key].tstamp);\n  }\n  return latestTimestamp;\n};\n\nconst cullCursors = (cursors, onError) => {\n  const culledCursors = {};\n  const latestTimestamp = getLatestTimestamp(cursors);\n  for (const key in cursors) {\n    if (latestTimestamp - cursors[key].tstamp > sessionTimeOut) {\n      culledCursors['cursors/' + key] = null;\n    }\n  }\n  update(culledCursors, onError);\n};\n\nexport const useCursors = (onError) => {\n  const [cursors, setCursors] = useState({});\n  useEffect(() => listen('cursors', setCursors, onError), []);\n\n  useEffect(() => {\n    if (Math.random() < 0.01) {\n      cullCursors(cursors, onError);\n    }\n  }, [cursors]);\n  return cursors;\n};\n\nexport const setCursor = throttle(\n  (user, mouseX, mouseY, xCoord, yCoord, scale, onError) =>\n    update(\n      {\n        [`cursors/${sessionId}`]: {\n          user: user.email,\n          mouseX,\n          mouseY,\n          left: xCoord - innerWidth / scale / 2,\n          top: yCoord - innerHeight / scale / 2,\n          width: innerWidth / scale,\n          height: innerHeight / scale,\n          tstamp: serverTimestamp(),\n        },\n      },\n      onError\n    ),\n  500\n);\n","import {Fragment} from 'react';\nimport {\n  getLatestTimestamp,\n  sessionId,\n  sessionTimeOut,\n} from '../hooks/useCursors';\n\nexport const CSS_SIZE = 32;\n\nexport const Cursors = ({cursors, userIndex}) => {\n  const latestTimestamp = getLatestTimestamp(cursors);\n  return Object.entries(cursors).map(\n    ([key, {user, left, top, width, height, tstamp, mouseX, mouseY}]) => {\n      if (key === sessionId || latestTimestamp - tstamp > sessionTimeOut)\n        return null;\n\n      const opacity = 1 - (latestTimestamp - tstamp) / sessionTimeOut;\n      return (\n        <Fragment key={key}>\n          <div\n            className=\"cursorView\"\n            style={{\n              transform: `translate(${left * CSS_SIZE}px, ${top * CSS_SIZE}px)`,\n              width: width * CSS_SIZE,\n              height: height * CSS_SIZE,\n              opacity,\n            }}\n          >\n            <span>{userIndex[user]?.name || user}</span>\n          </div>\n          {mouseX && mouseY ? (\n            <div\n              className=\"mouseCursor\"\n              style={{\n                transform: `translate(${(mouseX + 0.5) * CSS_SIZE}px, ${\n                  (mouseY + 0.5) * CSS_SIZE\n                }px)`,\n                opacity,\n              }}\n            >\n              <i className=\"fa-solid fa-arrow-pointer\"></i>\n              <span>{userIndex[user]?.name || user}</span>\n            </div>\n          ) : null}\n        </Fragment>\n      );\n    }\n  );\n};\n","import {serverTimestamp} from 'firebase/database';\nimport {memo, useCallback, useEffect, useMemo, useRef} from 'react';\nimport {update} from '../firebase';\nimport {setCursor} from '../hooks/useCursors';\nimport {indexBy, objToArr} from '../utils';\nimport {getBackground} from '../utils/getBackground';\nimport {CSS_SIZE, Cursors} from './Cursors';\nimport './worldEditor.css';\n\nconst placeTile = (x, y, id, user, onError) =>\n  update(\n    {\n      [`world/${x}_${y}`]:\n        id === '_delete'\n          ? null\n          : {x, y, tileType: id, user: user.email, tstamp: serverTimestamp()},\n    },\n    onError\n  );\n\nconst getCoords = (e, scale, xCoord, yCoord) => ({\n  x: Math.floor((e.clientX - innerWidth / 2) / scale) + xCoord,\n  y: Math.floor((e.clientY - innerHeight / 2) / scale) + yCoord,\n});\n\nconst getTitle = (user, tstamp, userIndex) => {\n  if (!user || !tstamp) return '';\n  const name = userIndex[user]?.name || user;\n  const date = new Date(tstamp).toLocaleString();\n  return `Placed by ${name} on ${date}`;\n};\n\nconst Tiles = ({world, tileTypeIndex, userIndex}) =>\n  Object.entries(world).map(([key, {x, y, tileType, user, tstamp}]) => (\n    <div\n      key={key}\n      className=\"tile\"\n      title={getTitle(user, tstamp, userIndex)}\n      style={{\n        transform: `translate(${x * CSS_SIZE}px, ${y * CSS_SIZE}px)`,\n        background: getBackground(tileTypeIndex[tileType]),\n      }}\n    />\n  ));\n\nconst TilesMemo = memo(Tiles);\n\nexport const WorldEditor = ({\n  world,\n  tileTypes,\n  selectedTileTypeId,\n  onError,\n  xCoord,\n  yCoord,\n  scale,\n  user,\n  cursors,\n  userIndex,\n}) => {\n  // using a ref is much more performant than keeping mouse coords in state\n  const ghostRef = useRef();\n\n  const tileTypeIndex = useMemo(\n    () => indexBy((t) => t.id, objToArr(tileTypes)),\n    [tileTypes]\n  );\n\n  // This checks for invalid tiles in the world and outputs them along with an update object\n  // useEffect(() => {\n  //   const badData = Object.entries(world).filter(\n  //     ([, t]) => !tileTypeIndex[t.tileType]\n  //   );\n  //   if (badData.length) {\n  //     console.log(\n  //       'This is bad data',\n  //       badData.map((p) => p[1]),\n  //       JSON.stringify(\n  //         Object.fromEntries(badData.map(([key]) => [`world/${key}`, null]))\n  //       )\n  //     );\n  //   }\n  // }, [world, tileTypeIndex]);\n\n  const onClick = (e) => {\n    const {x, y} = getCoords(e, scale, xCoord, yCoord);\n    if (e.altKey) {\n      window.open(\n        location.href.replace(/\\?.*/, '') + '#' + btoa(JSON.stringify({x, y})),\n        '_blank'\n      );\n      e.preventDefault();\n      return false;\n    } else if (selectedTileTypeId) {\n      const currentType = world[`${x}_${y}`]?.tileType;\n      const t = e.shiftKey ? '_delete' : selectedTileTypeId;\n      if ((currentType || t !== '_delete') && currentType !== t) {\n        placeTile(x, y, t, user, onError);\n      }\n    }\n  };\n\n  const onMouseMove = useCallback(\n    (e) => {\n      const {x, y} = getCoords(e, scale, xCoord, yCoord);\n      if (selectedTileTypeId) {\n        const s = ghostRef.current?.style;\n        s.transform = `translate(${x * CSS_SIZE}px, ${y * CSS_SIZE}px)`;\n        if (e.buttons) onClick(e);\n      }\n      setCursor(user, x, y, xCoord, yCoord, scale, onError);\n    },\n    [scale, xCoord, yCoord, selectedTileTypeId, user]\n  );\n\n  const cx = innerWidth / 2 - xCoord * CSS_SIZE;\n  const cy = innerHeight / 2 - yCoord * CSS_SIZE;\n\n  return (\n    <div\n      id=\"worldEditor\"\n      className=\"world\"\n      onClick={onClick}\n      onMouseMove={onMouseMove}\n    >\n      <div\n        style={{\n          transformOrigin: `${innerWidth / 2}px ${innerHeight / 2}px`,\n          transform: `scale(${scale / CSS_SIZE}) translate(${cx}px,${cy}px)`,\n        }}\n      >\n        <Cursors cursors={cursors} userIndex={userIndex} />\n\n        <TilesMemo {...{world, tileTypeIndex, userIndex}} />\n\n        {selectedTileTypeId && (\n          <div\n            ref={ghostRef}\n            className=\"ghost tile\"\n            style={{\n              background: getBackground(tileTypeIndex[selectedTileTypeId]),\n            }}\n          ></div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import {useEffect, useState} from 'react';\n\nconst mapping = {\n  KeyS: 'down',\n  KeyA: 'left',\n  KeyW: 'up',\n  KeyD: 'right',\n  ArrowUp: 'up',\n  ArrowDown: 'down',\n  ArrowLeft: 'left',\n  ArrowRight: 'right',\n};\n\nconst MOVE_AMOUNT = 4;\n\nexport const useCoords = (initialX = 0, initialY = 0) => {\n  const [xCoord, setXCoord] = useState(initialX);\n  const [yCoord, setYCoord] = useState(initialY);\n\n  useEffect(() => {\n    const onkeyDown = (e) => {\n      if (e.target !== document.body) return;\n      const dir = mapping[e.code];\n      if (dir === 'up') setYCoord((y) => y - MOVE_AMOUNT);\n      if (dir === 'down') setYCoord((y) => y + MOVE_AMOUNT);\n      if (dir === 'left') setXCoord((x) => x - MOVE_AMOUNT);\n      if (dir === 'right') setXCoord((x) => x + MOVE_AMOUNT);\n    };\n    window.addEventListener('keydown', onkeyDown);\n    return () => {\n      window.removeEventListener('keydown', onkeyDown);\n    };\n  }, []);\n\n  return {xCoord, yCoord, setXCoord, setYCoord};\n};\n","import {logOut} from '../firebase';\n\nexport const Nav = ({user, setScale, zoomAmt, userIndex, children}) => (\n  <nav>\n    {user && (\n      <div style={{float: 'right'}}>\n        <a onClick={() => setScale((s) => Math.round(s * zoomAmt))}>\n          <i className=\"fa-solid fa-magnifying-glass-plus\"></i>\n        </a>\n        <a onClick={() => setScale((s) => Math.round(s / zoomAmt))}>\n          <i className=\"fa-solid fa-magnifying-glass-minus\"></i>\n        </a>\n        Hi, {userIndex[user.email]?.name || user.email}!\n        <a onClick={logOut}>log out</a>\n      </div>\n    )}\n    <b>Game Editor</b>\n    {children}\n  </nav>\n);\n","const TextField = ({value = '', onChange}) => (\n  <input type=\"text\" value={value} onChange={(e) => onChange(e.target.value)} />\n);\n\nconst NumberField = ({value = '', onChange}) => (\n  <input\n    type=\"number\"\n    value={value}\n    onChange={(e) => onChange(e.target.value)}\n  />\n);\n\nconst Checkbox = ({value = false, onChange}) => (\n  <input\n    type=\"checkbox\"\n    checked={value}\n    onChange={(e) => onChange(e.target.checked)}\n  />\n);\n\nconst inputs = {\n  text: TextField,\n  number: NumberField,\n  checkbox: Checkbox,\n};\n\nexport const FormThing = ({fields, data, onChange}) =>\n  fields.map(({prop, label, type, info, show}) => {\n    if (show && !show(data)) return null;\n    const Field = inputs[type];\n    return (\n      <div key={prop} title={info}>\n        <label>{label}</label>\n        <Field value={data?.[prop]} onChange={(val) => onChange(val, prop)} />\n      </div>\n    );\n  });\n","import {update} from '../firebase';\nimport {objToArr} from '../utils';\nimport {FormThing} from './common/FormThing';\nimport './tileTypeEditor.css';\n\nconst fields = [\n  {\n    prop: 'label',\n    label: 'Label',\n    type: 'text',\n    info: 'The label you see in the tool bar below.',\n  },\n  {\n    prop: 'image',\n    label: 'Image URL',\n    type: 'text',\n    info: 'The image. uhduhhhh',\n  },\n  {\n    prop: 'color',\n    label: 'Color',\n    type: 'text',\n    info: 'The color to use if there is no image',\n  },\n  {\n    prop: 'healing',\n    label: 'Healing',\n    type: 'number',\n    info: 'How much does it heal (or hurt) when you eat/touch it (per frame)?',\n  },\n  {prop: 'edible', label: 'Edible', type: 'checkbox', info: 'Can you eat it?'},\n  {\n    prop: 'makePoop',\n    label: 'Make Poop',\n    type: 'number',\n    info: 'How much poop does it make?',\n    show: (data) => data.edible,\n  },\n  {\n    prop: 'diggable',\n    label: 'Diggable',\n    type: 'checkbox',\n    info: 'Can you dig it?',\n    show: (data) => !data.edible,\n  },\n  {\n    prop: 'collectible',\n    label: 'Collectible',\n    type: 'checkbox',\n    info: 'Can you collect it?',\n    show: (data) => !data.edible,\n  },\n  {\n    prop: 'movable',\n    label: 'Movable',\n    type: 'checkbox',\n    info: 'Can you push it?',\n  },\n  {\n    prop: 'order',\n    label: 'Order',\n    type: 'number',\n    info: 'The order it shows up in the toolbar below',\n  },\n  // {prop: 'movement', label: 'Movement', type: 'select', }\n];\n\nexport const TileTypeEditor = ({selectedTileTypeId, tileTypes, onError}) => {\n  const selectedTileType = objToArr(tileTypes).find(\n    (el) => el.id === selectedTileTypeId\n  );\n\n  return (\n    selectedTileType && (\n      <div className=\"tileTypeEditor\">\n        <p>\n          <span style={{color: 'orange'}}>\n            <i className=\"fa-solid fa-triangle-exclamation\"></i> WARNING\n          </span>{' '}\n          You can seriously mess up the game if you change these. Please write\n          them down and change them very carefully!\n        </p>\n        <FormThing\n          fields={fields}\n          data={selectedTileType}\n          onChange={(value, prop) => {\n            update(\n              {[`tileTypes/${selectedTileType.key}/${prop}`]: value},\n              onError\n            );\n          }}\n        />\n      </div>\n    )\n  );\n};\n","import {useEffect, useState} from 'react';\n\nconst parseJSON = (str, defaultVal) => {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    console.error(e);\n    return defaultVal;\n  }\n};\n\nexport const useStatePersist = (key, initial) => {\n  const [val, setVal] = useState(\n    localStorage[key] === undefined\n      ? initial\n      : parseJSON(localStorage[key], initial)\n  );\n\n  useEffect(() => {\n    localStorage[key] = JSON.stringify(val);\n  }, [val]);\n\n  return [val, setVal];\n};\n","import {useEffect, useState} from 'react';\nimport {listen, update} from '../firebase';\nimport {FormThing} from './common/FormThing';\nimport './gameConfig.css';\n\nconst useConfig = (onError) => {\n  const [config, setConfig] = useState();\n  useEffect(() => listen('gameConfig', setConfig, onError), []);\n  return config;\n};\n\nconst fields = [\n  {\n    prop: 'digSpeed',\n    label: 'Wombat Digging Speed',\n    type: 'number',\n    info: 'How fast much can you dig in one frame?',\n  },\n  {\n    prop: 'eatSpeed',\n    label: 'Wombat Eating Speed',\n    type: 'number',\n    info: 'How fast much can you eat in one frame?',\n  },\n  {\n    prop: 'gravity',\n    label: 'Gravity',\n    type: 'number',\n    info: 'How strong is gravity?',\n  },\n  {\n    prop: 'health',\n    label: 'Wombat Starting Health',\n    type: 'number',\n    info: 'How much health do you start with?',\n  },\n  {\n    prop: 'jumpPower',\n    label: 'Wombat Jumping Power',\n    type: 'number',\n    info: 'How much jumping power do you start with?',\n  },\n  {\n    prop: 'moveSpeed',\n    label: 'Wombat Acceleration',\n    type: 'number',\n    info: 'How fast can you move?',\n  },\n  {\n    prop: 'moveDeceleration',\n    label: 'Wombat Deceleration',\n    type: 'number',\n    info: 'How fast can you slow down?',\n  },\n  {\n    prop: 'magmaDelay',\n    label: 'Magma Delay',\n    type: 'number',\n    info: 'Number of frames between magma movements',\n  },\n];\n\nexport const GameConfig = ({onError}) => {\n  const config = useConfig(onError);\n  return (\n    <div className=\"gameConfig\">\n      <p>\n        <span style={{color: 'orange'}}>\n          <i className=\"fa-solid fa-triangle-exclamation\"></i> WARNING\n        </span>{' '}\n        You can seriously mess up the game if you change these. Please write\n        them down and change them very carefully!\n      </p>\n      <FormThing\n        fields={fields}\n        data={config}\n        onChange={(value, prop) => {\n          update({[`gameConfig/${prop}`]: value}, onError);\n        }}\n      />\n    </div>\n  );\n};\n","import {useEffect} from 'react';\nimport {debounce} from '../utils';\n\nconst setHash = debounce((...args) => {\n  location.hash = args.join('/');\n}, 1000);\n\nexport const useLocationHash = ({\n  xCoord,\n  yCoord,\n  scale,\n  setXCoord,\n  setYCoord,\n  setScale,\n}) => {\n  useEffect(() => {\n    setHash(xCoord, yCoord, scale);\n    return setHash.cancel;\n  }, [scale, xCoord, yCoord]);\n\n  useEffect(() => {\n    const onHashChange = () => {\n      const parts = location.hash.slice(1).split('/').map(Number);\n      if (parts.length === 3 && parts.every((p) => !isNaN(p))) {\n        const [x, y, scale] = parts;\n        setXCoord(x);\n        setYCoord(y);\n        setScale(scale);\n      }\n    };\n    onHashChange();\n    window.addEventListener('hashchange', onHashChange);\n    return () => {\n      window.removeEventListener('hashchange', onHashChange);\n    };\n  }, []);\n};\n","import './pane.css';\n\nexport const Pane = ({className, hide, label, children}) => (\n  <div className={`pane ${className}`}>\n    <div className=\"paneHeader\">\n      <a onClick={hide}>\n        <i className=\"fa-solid fa-x\"></i>\n      </a>\n      <strong>{label}</strong>\n    </div>\n    <div className=\"paneBody\">{children}</div>\n  </div>\n);\n","import {getLatestTimestamp, sessionTimeOut} from '../hooks/useCursors';\n\nexport const HereNow = ({cursors, userIndex}) => {\n  const latestTimestamp = getLatestTimestamp(cursors);\n  return Object.entries(cursors)\n    .filter((c) => latestTimestamp - c[1].tstamp < sessionTimeOut)\n    .map(([key, {user, mouseX, mouseY}]) => (\n      <div key={key} style={{margin: 5}}>\n        {userIndex[user]?.name || user}\n        {mouseX && mouseY ? (\n          <a style={{margin: '0 10px'}} href={`#${mouseX}/${mouseY}/32`}>\n            go\n          </a>\n        ) : null}\n      </div>\n    ));\n};\n","import {ErrorBanner} from './ErrorBanner';\nimport {useErrors} from '../hooks/useErrors';\nimport {useEffect, useState} from 'react';\n\nimport {Login} from './Login';\nimport {useUser} from '../hooks/useUser';\nimport {useUserIndex} from '../hooks/useUserIndex';\nimport {Toolbar} from './Toolbar';\nimport {WorldEditor} from './WorldEditor';\nimport {useTileTypes} from '../hooks/useTileTypes';\nimport {useCoords} from '../hooks/useCoords';\nimport {useWorld} from '../hooks/useWorld';\nimport {Nav} from './Nav';\nimport {TileTypeEditor} from './TileTypeEditor';\nimport {makeButtons} from '../utils/makeButtons';\nimport {GameConfig} from './GameConfig';\nimport './App.css';\nimport {useLocationHash} from '../hooks/useLocationHash';\nimport {Pane} from './common/Pane';\nimport {setCursor, useCursors} from '../hooks/useCursors';\nimport {HereNow} from './HereNow';\n\nconst zoomAmt = 2;\n\nconst paneConfigs = [\n  {\n    key: 'instructions',\n    buttonLabel: 'Instructions',\n    paneLabel: 'Instructions',\n    icon: 'circle-question',\n  },\n  {\n    key: 'gameConfig',\n    buttonLabel: 'Config',\n    paneLabel: 'Game Config',\n    icon: 'toolbox',\n  },\n  {key: 'tileTypeEditor', paneLabel: 'Tile Type Editor', hideButton: true},\n  {\n    key: 'hereNow',\n    buttonLabel: 'People',\n    paneLabel: 'Editing Now',\n    icon: 'person',\n  },\n  {key: 'debug', buttonLabel: 'Debug', paneLabel: 'Debug', icon: 'bug'},\n];\n\nexport const App = () => {\n  const [errors, onError, clearError] = useErrors();\n\n  // firebase state\n  const user = useUser();\n  const userIndex = useUserIndex(onError);\n  const tileTypes = useTileTypes(onError);\n  const world = useWorld(onError);\n  const cursors = useCursors(onError);\n\n  // local state\n  const [selectedTileTypeId, setSelectedTileTypeId] = useState();\n  const {xCoord, yCoord, setXCoord, setYCoord} = useCoords(0, 0);\n  const [scale, setScale] = useState(32);\n\n  // pane toggles\n  const Panes = makeButtons(paneConfigs);\n\n  useLocationHash({xCoord, yCoord, scale, setXCoord, setYCoord, setScale});\n\n  useEffect(() => {\n    if (user) setCursor(user, null, null, xCoord, yCoord, scale, onError);\n  }, [user, xCoord, yCoord, scale]);\n\n  return (\n    <>\n      <Nav {...{user, scale, setScale, zoomAmt, userIndex}}>\n        {Object.values(Panes).map(({button}) => button)}\n      </Nav>\n\n      <ErrorBanner errors={errors} clearError={clearError} />\n\n      {user ? (\n        <div className=\"appContainer\">\n          {Panes.debug.show && (\n            <Pane {...Panes.debug.paneProps}>\n              <textarea\n                readOnly\n                value={JSON.stringify(\n                  {\n                    xCoord,\n                    yCoord,\n                    scale,\n                    selectedTileTypeId,\n                    errors,\n                    user,\n                    cursors,\n                    // tileTypeIndex,\n                    // userIndex,\n                    // world,\n                  },\n                  null,\n                  2\n                )}\n              />\n            </Pane>\n          )}\n\n          {selectedTileTypeId &&\n            tileTypes &&\n            Panes.tileTypeEditor.show &&\n            Object.values(tileTypes).some(\n              (t) => t.id === selectedTileTypeId\n            ) && (\n              <Pane {...Panes.tileTypeEditor.paneProps}>\n                <TileTypeEditor\n                  selectedTileTypeId={selectedTileTypeId}\n                  tileTypes={tileTypes}\n                  onError={onError}\n                />\n              </Pane>\n            )}\n\n          {Panes.gameConfig.show && (\n            <Pane {...Panes.gameConfig.paneProps}>\n              <GameConfig onError={onError} />\n            </Pane>\n          )}\n\n          {Panes.hereNow.show && (\n            <Pane {...Panes.hereNow.paneProps}>\n              <HereNow cursors={cursors} userIndex={userIndex} />\n            </Pane>\n          )}\n\n          {Panes.instructions.show && (\n            <Pane {...Panes.instructions.paneProps}>\n              <p>Use the arrow keys or WASD to move around the map.</p>\n              <p>\n                Click a tile type at the bottom. Click on the map to place it.\n              </p>\n              <p>Shift+Click a tile to delete it.</p>\n              <p>\n                You can zoom in and out with{' '}\n                <i className=\"fa-solid fa-magnifying-glass-plus\"></i> and{' '}\n                <i className=\"fa-solid fa-magnifying-glass-minus\"></i> in the\n                upper right.\n              </p>\n              <p>\n                Share your URL with other editors to show them what you made.\n              </p>\n              <p>\n                To test what you have made, Alt+Click where you want to start\n                testing. Share your game URL to share your starting point.\n              </p>\n            </Pane>\n          )}\n\n          {tileTypes && (\n            <div className=\"toolContainer\">\n              <Toolbar\n                {...{\n                  tileTypes,\n                  selectedTileTypeId,\n                  setSelectedTileTypeId,\n                  showTileTypeEditor: Panes.tileTypeEditor.show,\n                  setShowTileTypeEditor: Panes.tileTypeEditor.setShow,\n                }}\n              />\n            </div>\n          )}\n\n          {world && tileTypes && (\n            <div className=\"worldEditorContainer\">\n              <WorldEditor\n                {...{\n                  world,\n                  selectedTileTypeId,\n                  tileTypes,\n                  onError,\n                  xCoord,\n                  yCoord,\n                  scale,\n                  user,\n                  cursors,\n                  userIndex,\n                }}\n              />\n            </div>\n          )}\n        </div>\n      ) : (\n        <Login onError={onError} />\n      )}\n    </>\n  );\n};\n","import {useStatePersist} from '../hooks/useStatePersist';\n\nexport const makeButtons = (config) =>\n  Object.fromEntries(\n    config.map(({key, buttonLabel, paneLabel, icon, hideButton}) => {\n      const [show, setShow] = useStatePersist('show' + buttonLabel, false);\n\n      const button = !hideButton && (\n        <a\n          key={key}\n          className={show ? 'active' : ''}\n          onClick={() => setShow((s) => !s)}\n        >\n          <i className={`fa-solid fa-${icon}`} /> {buttonLabel}\n        </a>\n      );\n\n      const paneProps = {\n        label: paneLabel,\n        className: key + 'Container',\n        hide: () => setShow(false),\n      };\n\n      return [key, {button, show, setShow, paneProps}];\n    })\n  );\n","import {useEffect, useState} from 'react';\nimport {listenUser} from '../firebase';\n\nexport const useUser = () => {\n  const [user, setUser] = useState();\n  useEffect(() => listenUser(setUser), []);\n  return user;\n};\n","import {useEffect, useState} from 'react';\nimport {listen} from '../firebase';\n\nexport const useTileTypes = (onError) => {\n  const [tileTypes, setTileTypes] = useState();\n  useEffect(() => listen('tileTypes', setTileTypes, onError), []);\n  return tileTypes;\n};\n","import {useEffect, useState} from 'react';\nimport {listen} from '../firebase';\n\nexport const useWorld = (onError) => {\n  const [world, setWorld] = useState({});\n  useEffect(() => listen('world', setWorld, onError), []);\n  return world;\n};\n","import React from 'react';\nimport {createRoot} from 'react-dom/client';\nimport {App} from './Components/App';\n\ndocument.title = 'Mortal Wombat Editor';\n\ncreateRoot(document.querySelector('#root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","import {initializeApp} from 'firebase/app';\nimport {\n  ref,\n  getDatabase,\n  update as _update,\n  onValue,\n  off,\n  get,\n  child,\n} from 'firebase/database';\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\n\ninitializeApp({\n  apiKey: 'AIzaSyBEserPzSUos4MT3XRO8NKAO2oVk1-LS-I',\n  authDomain: 'mortal-wombat-8c76a.firebaseapp.com',\n  projectId: 'mortal-wombat-8c76a',\n  storageBucket: 'mortal-wombat-8c76a.appspot.com',\n  messagingSenderId: '929181149015',\n  appId: '1:929181149015:web:33a7f450bcdbb06ae64012',\n  measurementId: 'G-JL6HCMYYBS',\n});\n\n/*\n\nData:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/database/mortal-wombat-8c76a-default-rtdb/data\nData Docs: https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=0\n\nUsers:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/authentication/users\nUser Docs: https://firebase.google.com/docs/auth/web/manage-users\n\n\n*/\n\nconst db = getDatabase();\nconst auth = getAuth();\nconst dbRef = ref(db);\n\n// {path1: val1, path2: val2}\nexport const update = (updates, onError) => {\n  try {\n    console.log('updates', updates);\n    return _update(dbRef, updates);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\nwindow._update = async (x) => console.log(await _update(dbRef, x));\n\n// export const updateWithHistory = (data, user, onError) =>\n//   update(\n//     {\n//       ...data,\n//       [`history/${guid()}`]: {\n//         update: JSON.stringify(data),\n//         user: user.email,\n//         tstamp: serverTimestamp(),\n//       },\n//     },\n//     onError\n//   );\n\nexport const loadData = async (things) =>\n  Object.fromEntries(\n    await Promise.all(\n      things.map(async (t) => [t, (await get(child(dbRef, t))).val()])\n    )\n  );\n\nexport const listen = (pathStr, onChange, onError) => {\n  try {\n    const r = ref(db, pathStr);\n    onValue(r, (snapshot) => onChange(snapshot.val()));\n    return () => off(r);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\n// export const createUser = async (email, pwd) => {\n//   try {\n//     const result = await createUserWithEmailAndPassword(auth, email, pwd);\n//     return result.user;\n//   } catch (e) {\n//     console.error(e);\n//     return e.message;\n//   }\n// };\n\nexport const logIn = (email, pwd) =>\n  signInWithEmailAndPassword(auth, email, pwd);\n\nexport const listenUser = (onChange) => onAuthStateChanged(auth, onChange);\n\nexport const logOut = () => signOut(auth);\n","export const getBackground = (type) =>\n  type?.image ? `no-repeat center/contain url(${type.image})` : type?.color;\n"],"names":["ErrorBanner","errors","clearError","Object","keys","length","className","entries","map","key","err","onClick","guid","Date","now","toString","Math","random","slice","indexBy","func","arr","res","el","objToArr","obj","useErrors","useState","setErrors","msg","e","copy","dissoc","Login","onError","email","setEmail","password","setPassword","style","width","margin","onSubmit","preventDefault","logIn","message","type","placeholder","value","onChange","target","useUserIndex","userIndex","setUserIndex","useEffect","listen","users","u","values","indexUsers","Toolbar","tileTypes","selectedTileTypeId","setSelectedTileTypeId","showTileTypeEditor","setShowTileTypeEditor","sort","a","b","order","id","background","getBackground","title","onDoubleClick","startsWith","label","sessionTimeOut","sessionId","getLatestTimestamp","cursors","latestTimestamp","max","tstamp","useCursors","setCursors","culledCursors","update","cullCursors","setCursor","delay","timeout","runAgainArgs","running","f","args","setTimeout","undefined","cancel","clearTimeout","throttle","user","mouseX","mouseY","xCoord","yCoord","scale","left","innerWidth","top","innerHeight","height","serverTimestamp","CSS_SIZE","Cursors","opacity","Fragment","transform","name","getCoords","x","floor","clientX","y","clientY","getTitle","date","toLocaleString","Tiles","world","tileTypeIndex","tileType","TilesMemo","memo","WorldEditor","ghostRef","useRef","useMemo","t","altKey","window","open","location","href","replace","btoa","JSON","stringify","currentType","shiftKey","placeTile","onMouseMove","useCallback","current","buttons","cx","cy","transformOrigin","ref","mapping","KeyS","KeyA","KeyW","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Nav","setScale","zoomAmt","children","float","s","round","logOut","inputs","text","number","checkbox","checked","FormThing","fields","data","prop","info","show","Field","val","edible","TileTypeEditor","selectedTileType","find","color","useStatePersist","initial","localStorage","str","defaultVal","parse","console","error","parseJSON","setVal","GameConfig","config","setConfig","useConfig","setHash","debounce","hash","join","Pane","hide","HereNow","filter","c","paneConfigs","buttonLabel","paneLabel","icon","hideButton","App","setUser","listenUser","useUser","setTileTypes","useTileTypes","setWorld","useWorld","initialX","initialY","setXCoord","setYCoord","onkeyDown","document","body","dir","code","addEventListener","removeEventListener","useCoords","Panes","fromEntries","setShow","paneProps","button","onHashChange","parts","split","Number","every","p","isNaN","useLocationHash","debug","readOnly","tileTypeEditor","some","gameConfig","hereNow","instructions","createRoot","querySelector","render","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getDatabase","auth","getAuth","dbRef","updates","log","_update","loadData","things","Promise","all","get","child","pathStr","r","onValue","snapshot","off","pwd","signInWithEmailAndPassword","onAuthStateChanged","signOut","image"],"sourceRoot":""}