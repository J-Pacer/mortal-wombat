{"version":3,"file":"static/js/541.05f17b1a.chunk.js","mappings":"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","sources":["firebase.js","game/main.js","game/elements.js","game/controls.js","game/compile.js","game/Game.js","game/load.js","utils.js","utils/getBackground.js"],"sourcesContent":["import {initializeApp} from 'firebase/app';\nimport {\n  ref,\n  getDatabase,\n  update as _update,\n  onValue,\n  off,\n  get,\n  child,\n} from 'firebase/database';\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\n\ninitializeApp({\n  apiKey: 'AIzaSyBEserPzSUos4MT3XRO8NKAO2oVk1-LS-I',\n  authDomain: 'mortal-wombat-8c76a.firebaseapp.com',\n  projectId: 'mortal-wombat-8c76a',\n  storageBucket: 'mortal-wombat-8c76a.appspot.com',\n  messagingSenderId: '929181149015',\n  appId: '1:929181149015:web:33a7f450bcdbb06ae64012',\n  measurementId: 'G-JL6HCMYYBS',\n});\n\n/*\nData:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/database/mortal-wombat-8c76a-default-rtdb/data\nData Docs: https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=0\nList Docs: https://firebase.google.com/docs/database/web/lists-of-data?hl=en&authuser=0\n\nUsers:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/authentication/users\nUser Docs: https://firebase.google.com/docs/auth/web/manage-users\n*/\n\nconst db = getDatabase();\nconst auth = getAuth();\nconst dbRef = ref(db);\n\nexport const defaultWorldId = 'l31p2np9:dy828s8l3wv';\n\n// {path1: val1, path2: val2}\nexport const update = (updates, onError) => {\n  try {\n    // console.log('updates', updates);\n    return _update(dbRef, updates);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\nif (location.host === 'localhost:3000') {\n  window._update = async (x) => await _update(dbRef, x);\n}\n\nexport const loadData = async (things) =>\n  Object.fromEntries(\n    await Promise.all(\n      things.map(async (t) => [t, (await get(child(dbRef, t))).val()])\n    )\n  );\n\nexport const listen = (pathStr, onChange, onError) => {\n  try {\n    const r = ref(db, pathStr);\n    onValue(r, (snapshot) => onChange(snapshot.val() || {}));\n    return () => off(r);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\n// export const createUser = async (email, pwd) => {\n//   try {\n//     const result = await createUserWithEmailAndPassword(auth, email, pwd);\n//     return result.user;\n//   } catch (e) {\n//     console.error(e);\n//     return e.message;\n//   }\n// };\n\nexport const logIn = (email, pwd) =>\n  signInWithEmailAndPassword(auth, email, pwd);\n\nexport const listenUser = (onChange) => onAuthStateChanged(auth, onChange);\n\nexport const logOut = () => signOut(auth);\n","import {Controls} from './controls';\nimport './game.css';\nimport {load} from './load';\n\nlet game,\n  controls,\n  isPaused = false;\n\nconst rootElement = document.querySelector('#root');\n\nconst loop = () => {\n  if (document.hasFocus() && game) {\n    if (isPaused) {\n      isPaused = false;\n      document.body.style.opacity = 1;\n    }\n    if (!game.dialog.isOpen) game.iterate(controls.getPressing());\n  } else if (!isPaused) {\n    isPaused = true;\n    document.body.style.opacity = 0.5;\n  }\n  requestAnimationFrame(loop);\n};\n\nconst init = async () => {\n  game = await load(rootElement);\n  controls = new Controls(\n    {\n      onPress: (id) => {\n        if (game.dialog.isOpen) {\n          if (id === 'space' && game.dialog.hasChoices()) game.dialog.choose();\n          else game.dialog.next();\n        } else {\n          if (id === 'poop') game.makePoop();\n          else if (id === 'space') game.interact();\n        }\n      },\n    },\n    rootElement\n  );\n  window.addEventListener('resize', () => {\n    game.updateViewport();\n  });\n  loop();\n};\n\ninit();\n","import {getBackground} from '../utils/getBackground';\nimport packageJSON from '../../package.json';\n\nconst TILE_SIZE = 48;\nconst CHUNK_SIZE = 24;\n\nconst toChunkCoords = (x, y) => [\n  Math.floor(x / CHUNK_SIZE),\n  Math.floor(y / CHUNK_SIZE),\n];\n\nclass Element {\n  constructor() {\n    this.el = document.createElement('div');\n  }\n  destroy() {\n    this.el.remove();\n  }\n}\n\nclass Chunk extends Element {\n  constructor(parentElement, x, y) {\n    super();\n    this.x = x;\n    this.y = y;\n    this.el.classList.add('chunk');\n    parentElement.append(this.el);\n  }\n  updateVisibility(x, y) {\n    const shouldShow = Math.abs(x - this.x) < 2 && Math.abs(y - this.y) < 2;\n    this.el.title = `chunk ${this.x}_${this.y} ${x} ${y}`;\n    if (shouldShow !== this.isShowing) {\n      this.isShowing = shouldShow;\n      this.el.style.display = shouldShow ? 'block' : 'none';\n    }\n  }\n}\n\nexport class WorldElement extends Element {\n  constructor(rootElement) {\n    super();\n    this.chunks = {};\n    rootElement.append(this.el);\n  }\n  update(you) {\n    const [chunkX, chunkY] = toChunkCoords(you.x, you.y);\n    if (chunkX !== you.chunkX || chunkY !== you.chunkY) {\n      you.chunkX = chunkX;\n      you.chunkY = chunkY;\n      for (const key in this.chunks) {\n        this.chunks[key].updateVisibility(chunkX, chunkY);\n      }\n    }\n\n    const cx = Math.round(innerWidth / 2 - you.x * TILE_SIZE);\n    const cy = Math.round(innerHeight / 2 - you.y * TILE_SIZE);\n    this.el.style.transform = `translate(${cx}px,${cy}px)`;\n    document.body.style.backgroundPosition = `${cx >> 2}px ${cy >> 2}px`;\n  }\n  getChunk(x, y) {\n    const [chunkX, chunkY] = toChunkCoords(x, y);\n    const key = `${chunkX}_${chunkY}`;\n    return (this.chunks[key] =\n      this.chunks[key] || new Chunk(this.el, chunkX, chunkY));\n  }\n}\n\nexport class TileElement extends Element {\n  constructor(tile, worldElement) {\n    super();\n    this.worldElement = worldElement;\n    this.el.classList.add('tile');\n    this.updateType(tile.type);\n    this.update(tile);\n  }\n  updateType(type) {\n    this.el.style.background = getBackground(type);\n  }\n  update({x, y, dirX = 0, dirY = 0}) {\n    const angle = Math.atan2(dirY, dirX) + Math.PI;\n    const flip = angle >= 0.5 * Math.PI && angle <= 1.5 * Math.PI;\n    this.el.style.transform = `\n    translate(${x * TILE_SIZE}px,${y * TILE_SIZE}px)\n    rotate(${angle}rad)\n    ${flip ? 'scaleY(-1)' : ''}`;\n\n    const [chunkX, chunkY] = toChunkCoords(x, y);\n    if (chunkX !== this.chunkX || chunkY !== this.chunkY) {\n      this.chunkX = chunkX;\n      this.chunkY = chunkY;\n      this.worldElement.getChunk(x, y).el.append(this.el);\n    }\n  }\n}\n\nclass BarElement extends Element {\n  constructor(parentElement) {\n    super();\n    this.el.classList.add('bar');\n    this.valueElement = document.createElement('div');\n    this.el.append(this.valueElement);\n    parentElement.append(this.el);\n  }\n  update(value, maxValue, color) {\n    const el = this.valueElement;\n    el.style.background = color;\n    el.style.width = (100 * value) / maxValue + '%';\n    el.innerText = value;\n  }\n}\n\nclass CollectibleCounter extends Element {\n  constructor(parentElement, type) {\n    super();\n    this.el.classList.add('collectibleCounter');\n    this.el.innerHTML = `<span></span> <div style=\"background: ${getBackground(\n      type\n    )}\"></div>`;\n    this.valueEl = this.el.querySelector('span');\n    parentElement.append(this.el);\n  }\n  update(value) {\n    this.valueEl.innerText = value;\n  }\n}\n\nexport class Hud extends Element {\n  constructor(parentElement) {\n    super();\n    this.el.classList.add('hud');\n\n    this.healthBar = new BarElement(this.el);\n    this.poopBar = new BarElement(this.el);\n    parentElement.append(this.el);\n\n    this.counters = {};\n  }\n  updateCounter(type, value) {\n    if (!this.counters[type.id]) {\n      this.counters[type.id] = new CollectibleCounter(this.el, type);\n    }\n    this.counters[type.id].update(value);\n  }\n}\n\nexport class VersionElement extends Element {\n  constructor(parentElement) {\n    super();\n    this.el.classList.add('version');\n    this.el.innerText = 'v' + packageJSON.version;\n    parentElement.append(this.el);\n  }\n}\n\nexport class Dialog extends Element {\n  constructor(parentElement) {\n    super();\n    this.el.classList.add('dialog');\n\n    this.div = document.createElement('div');\n    this.div.classList.add('dialogContainer');\n    this.el.append(this.div);\n\n    this.hide();\n    parentElement.append(this.el);\n  }\n  say(text) {\n    this.text = text;\n    this.choices = [];\n    this.choiceIndex = 0;\n    this.render();\n    this.el.style.display = 'block';\n    this.isOpen = true;\n  }\n  choice(text, action) {\n    this.choices.push({text, action});\n    this.render();\n  }\n  hasChoices() {\n    return this.choices.length > 0;\n  }\n  next() {\n    if (this.choices.length) {\n      this.choiceIndex = (this.choiceIndex + 1) % this.choices.length;\n      this.render();\n    } else {\n      this.hide();\n    }\n  }\n  render() {\n    this.div.innerHTML = `\n    <div>${this.text}</div>\n    <ul>\n    ${this.choices\n      .map(\n        ({text}, i) =>\n          `<li ${i === this.choiceIndex ? `class=\"selected\"` : ''}>${text}</li>`\n      )\n      .join('')}\n        </ul>\n        `;\n  }\n  choose() {\n    this.hide();\n    this.choices[this.choiceIndex].action();\n  }\n  hide() {\n    this.el.style.display = 'none';\n    this.isOpen = false;\n  }\n}\n\nexport class ControlButton extends Element {\n  constructor(parentElement, id, pressing) {\n    super();\n    this.el.classList.add('control');\n    this.el.setAttribute('id', id);\n    this.el.addEventListener('touchstart', () => (pressing[id] = true));\n    this.el.addEventListener('touchend', () => (pressing[id] = false));\n    parentElement.append(this.el);\n  }\n}\n\nexport class ControlCircle extends Element {\n  constructor(parentElement, pressing) {\n    super();\n    this.el.classList.add('controlCircle');\n\n    const move = ({touches, offsetX, offsetY}) => {\n      const size = this.el.clientWidth;\n      const x = (touches ? touches[0].offsetX : offsetX) / size - 0.5;\n      const y = (touches ? touches[0].offsetY : offsetY) / size - 0.5;\n      pressing.left = x < 0;\n      pressing.right = x > 0;\n      pressing.up = y < 0;\n      pressing.down = y > 0;\n      this.el.innerText = JSON.stringify(touches);\n    };\n    const up = () => {\n      pressing.left = false;\n      pressing.up = false;\n      pressing.down = false;\n      pressing.right = false;\n      this.el.removeEventListener('touchmove', move);\n      this.el.removeEventListener('mousemove', move);\n      this.el.removeEventListener('touchend', up);\n      this.el.removeEventListener('mouseup', up);\n    };\n    const down = (e) => {\n      move(e);\n      this.el.addEventListener('touchmove', move);\n      this.el.addEventListener('mousemove', move);\n      this.el.addEventListener('touchend', up);\n      this.el.addEventListener('mouseup', up);\n    };\n\n    this.el.addEventListener('touchstart', down);\n    this.el.addEventListener('mousedown', down);\n    parentElement.append(this.el);\n  }\n}\n","import {indexBy} from '../utils';\nimport {ControlCircle} from './elements';\n\nconst showControls = false;\n\nconst controls = [\n  {id: 'left', key: 'A', code: 'KeyA'},\n  {id: 'right', key: 'D', code: 'KeyD'},\n  {id: 'up', key: 'W', code: 'KeyW'},\n  {id: 'down', key: 'S', code: 'KeyS'},\n  {id: 'poop', key: 'P', code: 'KeyP'},\n  {id: 'space', key: 'Space', code: 'Space'},\n  {id: 'reload', key: 'R', code: 'KeyR'},\n];\n\nconst controlIndex = indexBy((c) => c.code, controls);\n\nexport class Controls {\n  constructor({onPress}, rootElement) {\n    this.pressing = {};\n    const keydown = (e) => {\n      if (controlIndex[e.code]) {\n        this.pressing[controlIndex[e.code].id] = e.type === 'keydown';\n      }\n    };\n    window.addEventListener('keydown', keydown);\n    window.addEventListener('keyup', keydown);\n    window.addEventListener('keypress', (e) => {\n      if (controlIndex[e.code]) {\n        onPress(controlIndex[e.code].id);\n      }\n    });\n\n    if (showControls) {\n      // for (const {id} of controls) {\n      //   new ControlButton(rootElement, id, this.pressing);\n      // }\n\n      new ControlCircle(rootElement, this.pressing, 400);\n    }\n  }\n  getPressing() {\n    return this.pressing;\n  }\n}\n","export const compile = (str) => {\n  if (!str) return;\n  try {\n    return new Function(\n      'game',\n      `\nconst GRASS = 'g';\nconst POOP = 'p';\nconst STONE = 's';\nconst WOMBAT = 'w';\nconst MAGMA = 'm';\nconst JEWEL = 'j';\nconst KOALA = 'k';\nconst WATER = 'a';\nconst POLYMER = 'o';\nconst NPC = 'n';\n\nconst say = game.dialog.say.bind(game.dialog);\nconst choice = game.dialog.choice.bind(game.dialog);\n\nconst numCollected = game.numCollected.bind(game);\nconst setCollectible = game.setCollectible.bind(game);\n\nconst setPoop = game.setPoop.bind(game);\nconst setHealth = game.setHealth.bind(game);\n\nconst moveTile = game.moveTile.bind(game);\nconst addTile = game.addTile.bind(game);\nconst isEmpty = game.isEmpty.bind(game);\nconst getTile = game.getTile.bind(game);\nconst damage = game.damage.bind(game);\nconst changeTileType = game.changeTileType.bind(game);\n\nconst you = game.you;\nconst poop = game.poop;\nconst health = game.health;\n\n${str}`\n    );\n  } catch (e) {\n    console.error(`Invalid logic: ${str}`);\n    console.error(e);\n    return;\n  }\n};\n","import {\n  Dialog,\n  Hud,\n  TileElement,\n  VersionElement,\n  WorldElement,\n} from './elements';\n\nconst MAX_RENDER_DIST = 32; // don't move things more than this many tiles away\nconst MOVEMENT_THRESHOLD = 0.1; // don't move you or the viewport if you move less than this much of a tile\n\nconst pairs = [\n  [Math.floor, Math.floor],\n  [Math.ceil, Math.floor],\n  [Math.floor, Math.ceil],\n  [Math.ceil, Math.ceil],\n];\n\nconst dirs = [\n  [1, 0],\n  [0, 1],\n  [-1, 0],\n  [0, -1],\n];\n\nexport class Game {\n  constructor(youPos, world, config, typeIndex, rootElement) {\n    this.rootElement = rootElement;\n    this.worldElement = new WorldElement(rootElement);\n    this.hud = new Hud(rootElement);\n    this.dialog = new Dialog(rootElement);\n\n    // Setup sounds for blocks that support sound.\n    this.sounds = {};\n    Object.values(typeIndex)\n      .filter((type) => type.sound)\n      .forEach((type) => (this.sounds[type.id] = new Audio(type.sound)));\n    if (config.fallDamageSound)\n      this.sounds.fallDamage = new Audio(config.fallDamageSound);\n    if (config.gameOverSound)\n      this.sounds.gameOver = new Audio(config.gameOverSound);\n\n    new VersionElement(rootElement);\n\n    this.world = {};\n    for (const key in world) this.addTile(world[key]);\n\n    this.typeIndex = typeIndex;\n    this.you = {x: 0, y: 0, xs: 0, ys: 0, dirX: 1, dirY: 0, ...youPos};\n    this.you.el = new TileElement(\n      {x: this.you.x, y: this.you.y, type: typeIndex.w},\n      this.worldElement\n    );\n    for (const key of ['x', 'y', 'dirX', 'dirY']) {\n      this.you['p' + key] = this.you[key];\n    }\n    this.collectibles = {};\n    this.frame = 0;\n\n    // these can all be overridden by config\n    this.digSpeed = 0.07;\n    this.eatSpeed = 0.05;\n    this.gravity = 0.005;\n    this.health = 100;\n    this.maxHealth = 100;\n    this.poop = 50;\n    this.maxPoop = 10;\n    this.jumpPower = 0.11;\n    this.moveSpeed = 0.02;\n    this.moveDeceleration = 0.3;\n    this.fallDamageMin = 0.2;\n    this.fallDamageMult = 100;\n    this.swimPower = 0.005;\n    this.waterDrag = 0.1;\n    this.airDrag = 0.001;\n\n    for (const x in config) {\n      if (!isNaN(config[x])) this[x] = Number(config[x]); // because editing them turns them into strings, yayyyy\n    }\n\n    this.setHealth(this.health);\n    this.setPoop(this.poop);\n    this.you.el.update(this.you);\n    this.worldElement.update(this.you);\n  }\n  iterate(pressing) {\n    this.moveWombat(pressing);\n    this.iterateTiles();\n    this.frame++;\n  }\n  addTile(tile) {\n    this.world[`${tile.x}_${tile.y}`] = {\n      ...tile,\n      el: new TileElement(tile, this.worldElement),\n    };\n  }\n  deleteTile(tile) {\n    tile.el.destroy();\n    delete this.world[`${tile.x}_${tile.y}`];\n  }\n  changeTileType(tile, type) {\n    tile.type = type;\n    delete tile.hp;\n    tile.el.updateType(type);\n  }\n  moveWombat(pressing) {\n    const {you, world} = this;\n    const lastSwimBlock = you.swimBlock;\n\n    if (this.health <= 0) {\n      if (pressing.reload) location.reload();\n      return;\n    }\n\n    if (pressing.left || pressing.right || pressing.up || pressing.down) {\n      you.dirX = 0;\n      you.dirY = 0;\n    }\n    if (pressing.left) {\n      you.xs -= you.swimBlock ? this.swimPower : this.moveSpeed;\n      you.dirX--;\n    }\n    if (pressing.right) {\n      you.xs += you.swimBlock ? this.swimPower : this.moveSpeed;\n      you.dirX++;\n    }\n    if (pressing.up) {\n      if (you.swimBlock) you.ys -= this.swimPower;\n      else if (!you.jumping && !you.ys) {\n        you.ys -= this.jumpPower;\n        you.jumping = true;\n      }\n      you.dirY--;\n    }\n    if (pressing.down) {\n      if (you.swimBlock) you.ys += this.swimPower;\n      you.dirY++;\n    }\n\n    you.x += you.xs;\n    you.xs *= 1 - (you.swimBlock ? this.waterDrag : this.moveDeceleration);\n\n    you.y += you.ys;\n    you.ys *= 1 - (you.swimBlock ? this.waterDrag : this.airDrag);\n    you.ys += this.gravity * (1 - (you.swimBlock?.type.density || 0));\n\n    const seen = {};\n    for (const [fx, fy] of pairs) {\n      const key = fx(you.x) + '_' + fy(you.y);\n      if (seen[key] || !world[key]) continue;\n      seen[key] = true;\n      this.resolveCollision(world[key]);\n    }\n\n    let damage = 0;\n    delete you.swimBlock;\n    for (const [fx, fy] of pairs) {\n      const block = world[fx(you.x) + '_' + fy(you.y)];\n      if (!block) continue;\n      if (block.type.collectible) {\n        this.collect(block.type.id);\n        return this.deleteTile(block);\n      }\n      if (block.type.healing < 0) {\n        damage = Math.max(damage, -block.type.healing);\n      }\n      if (block.type.moveStyle === 'liquid') you.swimBlock = block;\n    }\n    if (you.swimBlock && you.swimBlock !== lastSwimBlock) {\n      this.sounds[you.swimBlock.type.id]?.play();\n    }\n    if (damage) this.setHealth(this.health - damage);\n\n    if (\n      Math.abs(you.x - you.px) > MOVEMENT_THRESHOLD ||\n      Math.abs(you.y - you.py) > MOVEMENT_THRESHOLD ||\n      you.dirX !== you.pdirX ||\n      you.dirY !== you.pdirY\n    ) {\n      you.el.update(you);\n      this.worldElement.update(you);\n\n      you.px = you.x;\n      you.py = you.y;\n      you.pdirX = you.dirX;\n      you.pdirY = you.dirY;\n    }\n\n    if (pressing.space) {\n      const angle = Math.atan2(you.dirY, you.dirX);\n      const x = Math.round(you.x + Math.cos(angle));\n      const y = Math.round(you.y + Math.sin(angle));\n      const b = this.getTile(x, y);\n      if (b?.type.edible) {\n        this.damage(b, this.eatSpeed);\n        this.setHealth(this.health + b.type.healing * this.eatSpeed);\n        this.setPoop(this.poop + b.type.makePoop * this.eatSpeed);\n        this.sounds[b.type.id]?.play();\n      }\n      if (b?.type.diggable) this.damage(b, this.digSpeed);\n    }\n  }\n  // returns true if block is destroyed\n  damage(block, amount) {\n    if (!block?.type.hp) return;\n    if (block.hp === undefined) block.hp = block.type.hp;\n\n    block.hp -= amount;\n\n    if (block.hp <= 0) {\n      if (block.type.dropsLoot) {\n        this.changeTileType(block, this.typeIndex[block.type.dropsLoot]);\n      } else this.deleteTile(block);\n\n      return true;\n    }\n  }\n  resolveCollision(block) {\n    const {you} = this;\n    if (block.type.collectible || block.type.moveStyle === 'liquid') return;\n\n    if (block.type.healing < 0) {\n      this.setHealth(this.health + Number(block.type.healing));\n      this.sounds[block.type.id]?.play();\n      you.y -= 0.1;\n    }\n\n    if (Math.abs(you.x - block.x) > Math.abs(you.y - block.y)) {\n      const dx = block.x < you.x ? -1 : 1;\n      if (\n        !you.jumping &&\n        you.ys === this.gravity &&\n        block.type.movable &&\n        this.isEmpty(block.x + dx, block.y)\n      ) {\n        this.moveTile(block.x, block.y, dx, 0);\n      } else {\n        you.x = block.x + (you.x < block.x ? -1 : 1);\n      }\n      you.xs = 0;\n    } else {\n      if (you.y < block.y) you.jumping = false;\n      you.y = block.y + (you.y < block.y ? -1 : 1);\n\n      // fall damage\n      if (you.ys > this.fallDamageMin) {\n        const damage = (you.ys - this.fallDamageMin) * this.fallDamageMult;\n        this.setHealth(this.health - damage);\n        this.sounds.fallDamage?.play();\n\n        const blockDamage = Math.min(\n          damage,\n          block.hp || Infinity,\n          block.type.hp || Infinity\n        );\n        if (this.damage(block, damage)) {\n          you.ys /= 1 + blockDamage;\n          return;\n        }\n      }\n      you.ys = 0;\n    }\n  }\n  getTile(x, y) {\n    return this.world[`${x}_${y}`];\n  }\n  isEmpty(x, y) {\n    return !this.getTile(x, y);\n  }\n  badGuyCanWalkOn(x, y) {\n    const t = this.getTile(x, y);\n    return t && t.type.moveStyle !== 'liquid';\n  }\n  moveTile(x, y, dx, dy) {\n    const key = `${x}_${y}`;\n    const b = this.world[key];\n    delete this.world[key];\n    b.x += dx;\n    b.y += dy;\n    this.world[`${b.x}_${b.y}`] = b;\n    b.el.update(b);\n  }\n  iterateTiles() {\n    for (const key in this.world) {\n      const b = this.world[key];\n      if (\n        !b.type.moveDelay ||\n        this.frame % b.type.moveDelay > 0 ||\n        Math.abs(this.you.x - b.x) > MAX_RENDER_DIST ||\n        Math.abs(this.you.y - b.y) > MAX_RENDER_DIST\n      )\n        continue;\n\n      if (this.isEmpty(b.x, b.y + 1)) {\n        this.moveTile(b.x, b.y, 0, 1);\n      } else if (b.type.moveStyle === 'liquid') {\n        const left = this.isEmpty(b.x - 1, b.y);\n        const right = this.isEmpty(b.x + 1, b.y);\n        if (left && right) {\n          this.moveTile(b.x, b.y, Math.random() < 0.5 ? 1 : -1, 0);\n        } else if (left) {\n          this.moveTile(b.x, b.y, -1, 0);\n        } else if (right) {\n          this.moveTile(b.x, b.y, 1, 0);\n        }\n      } else if (b.type.moveStyle === 'patrol') {\n        if (!b.dirX) b.dirX = 1;\n        if (\n          this.isEmpty(b.x + b.dirX, b.y) &&\n          this.badGuyCanWalkOn(b.x + b.dirX, b.y + 1)\n        ) {\n          this.moveTile(b.x, b.y, b.dirX, 0);\n        } else {\n          b.dirX *= -1;\n        }\n      }\n\n      // special rules for magma\n      if (b.type.id === 'm') {\n        let touchingWater = false;\n        for (const [dx, dy] of dirs) {\n          const block = this.getTile(b.x + dx, b.y + dy);\n          if (block && (block.type.hp || block.type.id === 'a')) {\n            if (block.type.id === 'a') touchingWater = true;\n            this.deleteTile(block);\n          }\n        }\n        if (touchingWater) {\n          // if lava touches water, it turns to stone\n          this.changeTileType(b, this.typeIndex.s);\n        }\n      }\n    }\n  }\n  setHealth(health) {\n    this.health = Math.max(0, Math.min(this.maxHealth, health));\n    this.hud.healthBar.update(\n      Math.ceil(this.health),\n      this.maxHealth,\n      this.health > 30 ? 'green' : 'red'\n    );\n    if (health <= 0) {\n      this.sounds.gameOver?.play();\n      this.rootElement.innerHTML +=\n        '<div class=\"youDead\"><h1>you dead</h1><h2>press R to try again</h2></div>';\n    }\n  }\n  numCollected(id) {\n    return this.collectibles[id] || 0;\n  }\n  setCollectible(typeId, amount) {\n    this.collectibles[typeId] = amount;\n    this.hud.updateCounter(this.typeIndex[typeId], amount);\n  }\n  collect(typeId) {\n    this.setCollectible(typeId, this.numCollected(typeId) + 1);\n    this.sounds[typeId]?.play();\n  }\n  setPoop(poop) {\n    this.poop = Math.max(0, Math.min(this.maxPoop, poop));\n    this.hud.poopBar.update(Math.floor(this.poop), this.maxPoop, 'saddleBrown');\n  }\n  makePoop() {\n    if (this.poop < 1) return;\n    const {you, world, typeIndex} = this;\n    const angle = Math.atan2(you.dirY, you.dirX) + Math.PI;\n    const x = Math.round(you.x + Math.cos(angle));\n    const y = Math.round(you.y + Math.sin(angle));\n    if ((x !== you.x || y !== you.y) && !world[`${x}_${y}`]) {\n      this.addTile({x, y, type: typeIndex.p});\n      this.setPoop(this.poop - 1);\n      this.sounds.p?.play();\n    }\n  }\n  updateViewport() {\n    this.worldElement.update(this.you);\n  }\n  interact() {\n    const {you} = this;\n    const angle = Math.atan2(you.dirY, you.dirX);\n    const x = Math.round(you.x + Math.cos(angle));\n    const y = Math.round(you.y + Math.sin(angle));\n    this.getTile(x, y)?.onSpace?.(this);\n  }\n}\n","import {defaultWorldId, loadData} from '../firebase';\nimport {isGuid} from '../utils';\nimport {compile} from './compile';\nimport {Game} from './Game';\n\nexport const load = async (rootElement) => {\n  let hashConfig;\n  if (location.hash.length > 1) {\n    try {\n      hashConfig = JSON.parse(atob(location.hash.slice(1)));\n    } catch (e) {\n      console.log('bad hash', e);\n    }\n  }\n\n  const worldKey = `worlds/${\n    isGuid(hashConfig?.worldId) ? hashConfig.worldId : defaultWorldId\n  }/world`;\n\n  const data = await loadData(['tileTypes', worldKey, 'gameConfig']);\n\n  const {tileTypes, gameConfig} = data;\n  const world = data[worldKey];\n\n  const typeIndex = {};\n  let you;\n  for (const type of Object.values(tileTypes)) {\n    typeIndex[type.id] = type;\n  }\n  for (const key in world) {\n    const {x, y, tileType, onSpace} = world[key];\n    if (tileType === 'w') {\n      you = {x, y};\n      delete world[key];\n    } else if (typeIndex[tileType]) {\n      world[key] = {x, y, type: typeIndex[tileType], onSpace: compile(onSpace)};\n    } else {\n      delete world[key];\n    }\n  }\n\n  if (hashConfig?.x !== undefined && hashConfig?.y !== undefined) {\n    you.x = hashConfig.x;\n    you.y = hashConfig.y;\n  }\n\n  return new Game(you, world, gameConfig, typeIndex, rootElement);\n};\n","// export const assocPath = ([first, ...rest], val, obj) => {\n//   const copy = Array.isArray(obj) ? [...obj] : {...obj};\n//   copy[first] = rest.length ? assocPath(rest, val, copy[first]) : val;\n//   return copy;\n// };\n\nexport const dissoc = (key, obj) => {\n  const copy = {...obj};\n  delete copy[key];\n  return copy;\n};\n\nexport const guid = () =>\n  Date.now().toString(36) + ':' + Math.random().toString(36).slice(2);\n\nexport const isGuid = (str) => /^[0-9a-z]{8,}:[0-9a-z]+$/.test(str);\n\nexport const groupBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) {\n    const key = func(el);\n    (res[key] = res[key] || []).push(el);\n  }\n  return res;\n};\n\nexport const indexBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) res[func(el)] = el;\n  return res;\n};\n\nexport const objToArr = (obj = {}) =>\n  Object.entries(obj).map(([key, el]) => ({key, ...el}));\n\nexport const debounce = (func, delay) => {\n  let timeout;\n  const f = (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\nexport const throttle = (func, delay) => {\n  let timeout;\n  let running = false;\n  let runAgainArgs;\n  const f = (...args) => {\n    if (running) {\n      runAgainArgs = args;\n      return;\n    }\n    running = true;\n    timeout = setTimeout(() => {\n      func(...args);\n      running = false;\n      if (runAgainArgs) {\n        f(...runAgainArgs);\n      }\n      runAgainArgs = undefined;\n    }, delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\n// const memoize = (func) => {\n//   const cache = {};\n//   return (...args) => {\n//     const key = JSON.stringify(args);\n//     if (cache[key] === undefined) cache[key] = func(...args);\n//     return cache[key];\n//   };\n// };\n","export const getBackground = (type) =>\n  type?.image ? `no-repeat center/contain url(${type.image})` : type?.color;\n"],"names":["initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getDatabase","auth","getAuth","dbRef","ref","defaultWorldId","update","updates","onError","_update","e","console","error","message","location","host","window","x","loadData","things","Object","Promise","all","map","t","get","child","val","fromEntries","listen","pathStr","onChange","r","onValue","snapshot","off","logIn","email","pwd","signInWithEmailAndPassword","listenUser","onAuthStateChanged","logOut","signOut","game","controls","toChunkCoords","y","Math","floor","Element","this","el","document","createElement","remove","Chunk","parentElement","classList","add","append","shouldShow","abs","title","isShowing","style","display","WorldElement","rootElement","chunks","you","chunkX","chunkY","key","updateVisibility","cx","round","innerWidth","cy","innerHeight","transform","body","backgroundPosition","TileElement","tile","worldElement","updateType","type","background","getBackground","dirX","dirY","angle","atan2","PI","flip","getChunk","BarElement","valueElement","value","maxValue","color","width","innerText","CollectibleCounter","innerHTML","valueEl","querySelector","Hud","healthBar","poopBar","counters","id","VersionElement","packageJSON","Dialog","div","hide","text","choices","choiceIndex","render","isOpen","action","push","length","i","join","controlIndex","indexBy","c","code","Controls","onPress","pressing","keydown","addEventListener","compile","str","Function","pairs","ceil","dirs","Game","youPos","world","config","typeIndex","hud","dialog","sounds","values","filter","sound","forEach","Audio","fallDamageSound","fallDamage","gameOverSound","gameOver","addTile","xs","ys","w","collectibles","frame","digSpeed","eatSpeed","gravity","health","maxHealth","poop","maxPoop","jumpPower","moveSpeed","moveDeceleration","fallDamageMin","fallDamageMult","swimPower","waterDrag","airDrag","isNaN","Number","setHealth","setPoop","moveWombat","iterateTiles","destroy","hp","lastSwimBlock","swimBlock","reload","left","right","up","down","jumping","density","seen","fx","fy","resolveCollision","damage","block","collectible","collect","deleteTile","healing","max","moveStyle","play","px","py","pdirX","pdirY","space","cos","sin","b","getTile","edible","makePoop","diggable","amount","undefined","dropsLoot","changeTileType","dx","movable","isEmpty","moveTile","blockDamage","min","Infinity","dy","moveDelay","random","badGuyCanWalkOn","touchingWater","s","typeId","updateCounter","setCollectible","numCollected","p","onSpace","load","hash","hashConfig","JSON","parse","atob","slice","log","worldKey","isGuid","worldId","data","tileTypes","gameConfig","tileType","isPaused","loop","hasFocus","opacity","iterate","getPressing","requestAnimationFrame","init","hasChoices","choose","next","interact","updateViewport","dissoc","obj","copy","guid","Date","now","toString","test","func","arr","res","objToArr","entries","debounce","delay","timeout","f","args","clearTimeout","setTimeout","cancel","throttle","runAgainArgs","running","image"],"sourceRoot":""}