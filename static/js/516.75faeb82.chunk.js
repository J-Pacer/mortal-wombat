"use strict";(self.webpackChunkmortal_wombat=self.webpackChunkmortal_wombat||[]).push([[516],{63:function(e,t,n){n.d(t,{G9:function(){return m},Ib:function(){return f},Vx:function(){return p},mu:function(){return y},ni:function(){return g},oL:function(){return v},rZ:function(){return d}});var i=n(861),a=n(757),o=n.n(a),s=n(426),r=n(408),l=n(918);(0,s.ZF)({apiKey:"AIzaSyBEserPzSUos4MT3XRO8NKAO2oVk1-LS-I",authDomain:"mortal-wombat-8c76a.firebaseapp.com",projectId:"mortal-wombat-8c76a",storageBucket:"mortal-wombat-8c76a.appspot.com",messagingSenderId:"929181149015",appId:"1:929181149015:web:33a7f450bcdbb06ae64012",measurementId:"G-JL6HCMYYBS"});var u=(0,r.N8)(),c=(0,l.v0)(),h=(0,r.iH)(u),d="l5ybd0mu:2x3xfrsom4h",p=function(e,t){try{return(0,r.Vx)(h,e)}catch(n){console.error(n),t(n.message)}};"localhost:3000"===location.host&&(window._update=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.Vx)(h,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var y=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,Promise.all(t.map(function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,(0,r.U2)((0,r.iU)(h,t));case 3:return e.t1=e.sent.val(),e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.fromEntries.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t,n){try{var i=(0,r.iH)(u,e);return(0,r.jM)(i,(function(e){return t(e.val()||{})})),function(){return(0,r.S1)(i)}}catch(a){console.error(a),n(a.message)}},f=function(e,t){return(0,l.e5)(c,e,t)},m=function(e){return(0,l.Aj)(c,e)},g=function(){return(0,l.w7)(c)}},516:function(e,t,n){n.r(t);var i,a,o=n(861),s=n(757),r=n.n(s),l=n(671),u=n(144),c=n(457),h=n(885),d=n(136),p=n(668),y=n(546),v=n(147),f=function(e,t){return[Math.floor(e/24),Math.floor(t/24)]},m=function(){function e(){(0,l.Z)(this,e),this.el=document.createElement("div")}return(0,u.Z)(e,[{key:"destroy",value:function(){this.el.remove()}}]),e}(),g=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,i,a){var o;return(0,l.Z)(this,n),(o=t.call(this)).x=i,o.y=a,o.el.classList.add("chunk"),e.append(o.el),o}return(0,u.Z)(n,[{key:"updateVisibility",value:function(e,t){var n=Math.abs(e-this.x)<2&&Math.abs(t-this.y)<2;this.el.title="chunk ".concat(this.x,"_").concat(this.y," ").concat(e," ").concat(t),n!==this.isShowing&&(this.isShowing=n,this.el.style.display=n?"block":"none")}}]),n}(m),w=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this)).chunks={},e.append(i.el),i}return(0,u.Z)(n,[{key:"update",value:function(e){var t=f(e.x,e.y),n=(0,h.Z)(t,2),i=n[0],a=n[1];if(i!==e.chunkX||a!==e.chunkY)for(var o in e.chunkX=i,e.chunkY=a,this.chunks)this.chunks[o].updateVisibility(i,a);var s=Math.round(innerWidth/2-48*e.x),r=Math.round(innerHeight/2-48*e.y);this.el.style.transform="translate(".concat(s,"px,").concat(r,"px)"),document.body.style.backgroundPosition="".concat(s>>2,"px ").concat(r>>2,"px")}},{key:"getChunk",value:function(e,t){var n=f(e,t),i=(0,h.Z)(n,2),a=i[0],o=i[1],s="".concat(a,"_").concat(o);return this.chunks[s]=this.chunks[s]||new g(this.el,a,o)}}]),n}(m),x=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;return(0,l.Z)(this,n),(a=t.call(this)).worldElement=i,a.el.classList.add("tile"),a.updateType(e.type),a.update(e),a}return(0,u.Z)(n,[{key:"updateType",value:function(e){this.el.style.background=(0,y.V)(e)}},{key:"update",value:function(e){var t=e.x,n=e.y,i=e.dirX,a=void 0===i?0:i,o=e.dirY,s=void 0===o?0:o,r=Math.atan2(s,a)+Math.PI,l=r>=.5*Math.PI&&r<=1.5*Math.PI;this.el.style.transform="\n    translate(".concat(48*t,"px,").concat(48*n,"px)\n    rotate(").concat(r,"rad)\n    ").concat(l?"scaleY(-1)":"");var u=f(t,n),c=(0,h.Z)(u,2),d=c[0],p=c[1];d===this.chunkX&&p===this.chunkY||(this.chunkX=d,this.chunkY=p,this.worldElement.getChunk(t,n).el.append(this.el))}}]),n}(m),k=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this)).el.classList.add("bar"),i.valueElement=document.createElement("div"),i.el.append(i.valueElement),e.append(i.el),i}return(0,u.Z)(n,[{key:"update",value:function(e,t,n){var i=this.valueElement;i.style.background=n,i.style.width=100*e/t+"%",i.innerText=e}}]),n}(m),b=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;return(0,l.Z)(this,n),(a=t.call(this)).el.classList.add("collectibleCounter"),a.el.innerHTML='<span></span> <div style="background: '.concat((0,y.V)(i),'"></div>'),a.valueEl=a.el.querySelector("span"),e.append(a.el),a}return(0,u.Z)(n,[{key:"update",value:function(e){this.valueEl.innerText=e}}]),n}(m),M=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this)).el.classList.add("hud"),i.healthBar=new k(i.el),i.poopBar=new k(i.el),e.append(i.el),i.counters={},i}return(0,u.Z)(n,[{key:"updateCounter",value:function(e,t){this.counters[e.id]||(this.counters[e.id]=new b(this.el,e)),this.counters[e.id].update(t)}}]),n}(m),Z=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this)).el.classList.add("version"),i.el.innerText="v"+v.i8,e.append(i.el),i}return(0,u.Z)(n)}(m),T=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this)).el.classList.add("dialog"),i.div=document.createElement("div"),i.div.classList.add("dialogContainer"),i.el.append(i.div),i.hide(),e.append(i.el),i}return(0,u.Z)(n,[{key:"say",value:function(e){this.text=e,this.choices=[],this.choiceIndex=0,this.render(),this.el.style.display="block",this.isOpen=!0}},{key:"choice",value:function(e,t){this.choices.push({text:e,action:t}),this.render()}},{key:"hasChoices",value:function(){return this.choices.length>0}},{key:"next",value:function(){this.choices.length?(this.choiceIndex=(this.choiceIndex+1)%this.choices.length,this.render()):this.hide()}},{key:"renderChoices",value:function(){var e=this,t=this.choices.map((function(t,n){var i=t.text;return"<li ".concat(n===e.choiceIndex?'class="selected"':"",">").concat(i,"</li>")})).join("");return t?"<ul>".concat(t,"</ul>"):""}},{key:"render",value:function(){this.div.innerHTML=this.text+this.renderChoices()}},{key:"choose",value:function(){this.hide(),this.choices[this.choiceIndex].action()}},{key:"hide",value:function(){this.el.style.display="none",this.isOpen=!1}}]),n}(m),S=(0,c.HK)((function(e){return e.code}),[{id:"left",key:"A",code:"KeyA"},{id:"right",key:"D",code:"KeyD"},{id:"up",key:"W",code:"KeyW"},{id:"down",key:"S",code:"KeyS"},{id:"poop",key:"P",code:"KeyP"},{id:"space",key:"Space",code:"Space"},{id:"reload",key:"R",code:"KeyR"}]),P=function(){function e(t,n,i){var a=this,o=t.onPress;(0,l.Z)(this,e),this.pressing={},this.additionalControls=i||[];var s=function(e){S[e.code]&&(a.pressing[S[e.code].id]="keydown"===e.type)};window.addEventListener("keydown",s),window.addEventListener("keyup",s),window.addEventListener("keypress",(function(e){S[e.code]&&o(S[e.code].id)}))}return(0,u.Z)(e,[{key:"getPressing",value:function(){var e=this.pressing;return this.additionalControls.forEach((function(t){e=t.getPressing(e)})),e}}]),e}(),E=n(413),C=0,I=1,X=2,L=0,B=1,D=function(){function e(t){var n=t.onPress;(0,l.Z)(this,e),this.onPress=n,this.lastGamepadState={}}return(0,u.Z)(e,[{key:"getGamepad",value:function(){for(var e=navigator.getGamepads(),t=0;t<e.length;t++)if(null!=e[t]&&e[t].connected)return e[t];return null}},{key:"getGamepadState",value:function(){var e=this.getGamepad();if(null!=e)return{up:e.axes[B]<=-.5||e.buttons[I].pressed,down:e.axes[B]>=.5,left:e.axes[L]<=-.25,right:e.axes[L]>=.25,space:e.buttons[C].pressed,poop:e.buttons[X].pressed}}},{key:"getPressing",value:function(e){var t=this,n=this.getGamepadState();if(!n)return e;var i=(0,E.Z)({},e),a=function(e){i[e]=!0,t.lastGamepadState[e]||t.onPress(e)};return n.up&&a("up"),n.down&&a("down"),n.left&&a("left"),n.right&&a("right"),n.space&&a("space"),n.poop&&a("poop"),this.lastGamepadState=n,i}}]),e}(),O=n(63),Y=function(e){if(e)try{return new Function("game",function(e){return"\nconst GRASS = 'g';\nconst POOP = 'p';\nconst STONE = 's';\nconst WOMBAT = 'w';\nconst MAGMA = 'm';\nconst JEWEL = 'j';\nconst KOALA = 'k';\nconst WATER = 'a';\nconst POLYMER = 'o';\nconst NPC = 'n';\n\nconst say = game.dialog.say.bind(game.dialog);\nconst choice = game.dialog.choice.bind(game.dialog);\nconst playSound = game.playSound.bind(game);\nconst pauseSound = game.pauseSound.bind(game);\n\nconst numCollected = game.numCollected.bind(game);\nconst setCollectible = game.setCollectible.bind(game);\n\nconst setPoop = game.setPoop.bind(game);\nconst setHealth = game.setHealth.bind(game);\n\nconst moveTile = game.moveTile.bind(game);\nconst addTile = game.addTile.bind(game);\nconst isEmpty = game.isEmpty.bind(game);\nconst getTile = game.getTile.bind(game);\nconst damage = game.damage.bind(game);\nconst changeTileType = game.changeTileType.bind(game);\n\nconst you = game.you;\nconst poop = game.poop;\nconst health = game.health;\n\n".concat(e)}(e))}catch(t){return console.error("Invalid logic: ".concat(e)),void console.error(t)}},H=n(762),A=[[Math.floor,Math.floor],[Math.ceil,Math.floor],[Math.floor,Math.ceil],[Math.ceil,Math.ceil]],j=[[1,0],[0,1],[-1,0],[0,-1]],_=function(){function e(t,n,i,a,o){for(var s in(0,l.Z)(this,e),this.rootElement=o,this.worldElement=new w(o),this.hud=new M(o),this.dialog=new T(o),this.sounds=this.buildSounds(i,a),new Z(o),this.world={},n)this.addTile(n[s]);this.typeIndex=a,this.you=(0,E.Z)({x:0,y:0,xs:0,ys:0,dirX:1,dirY:0},t),this.you.el=new x({x:this.you.x,y:this.you.y,type:a.w},this.worldElement);for(var r=0,u=["x","y","dirX","dirY"];r<u.length;r++){var c=u[r];this.you["p"+c]=this.you[c]}for(var h in this.collectibles={},this.frame=0,this.digSpeed=.07,this.eatSpeed=.05,this.gravity=.005,this.health=100,this.maxHealth=100,this.poop=50,this.maxPoop=10,this.jumpPower=.11,this.moveSpeed=.02,this.moveDeceleration=.3,this.fallDamageMin=.2,this.fallDamageMult=100,this.swimPower=.005,this.waterDrag=.1,this.airDrag=.001,i)isNaN(i[h])||(this[h]=Number(i[h]));this.setHealth(this.health),this.setPoop(this.poop),this.you.el.update(this.you),this.worldElement.update(this.you)}return(0,u.Z)(e,[{key:"buildSounds",value:function(e,t){var n={};Object.values(t).filter((function(e){return e.sound})).forEach((function(e){return n[e.id]=new Audio(e.sound)}));var i="Sound";return Object.keys(e).filter((function(t){return t.endsWith(i)&&e[t]})).forEach((function(t){var a=t.substring(0,t.length-i.length);n[a]=new Audio(e[t])})),n}},{key:"playSound",value:function(e){var t,n;void 0===this.sounds[e]&&(n=e,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n))&&(this.sounds[e]=new Audio(e)),null===(t=this.sounds[e])||void 0===t||t.play()}},{key:"pauseSound",value:function(e){var t;null===(t=this.sounds[e])||void 0===t||t.pause()}},{key:"iterate",value:function(e){this.moveWombat(e),this.iterateTiles(),this.frame++}},{key:"addTile",value:function(e){this.world["".concat(e.x,"_").concat(e.y)]=(0,E.Z)((0,E.Z)({},e),{},{el:new x(e,this.worldElement)})}},{key:"deleteTile",value:function(e){e.el.destroy(),delete this.world["".concat(e.x,"_").concat(e.y)]}},{key:"changeTileType",value:function(e,t){e.type=t,delete e.hp,e.el.updateType(t)}},{key:"moveWombat",value:function(e){var t,n=this.you,i=this.world,a=n.swimBlock;if(this.health<=0)e.reload&&location.reload();else{(e.left||e.right||e.up||e.down)&&(n.dirX=0,n.dirY=0),e.left&&(n.xs-=n.swimBlock?this.swimPower:this.moveSpeed,n.dirX--),e.right&&(n.xs+=n.swimBlock?this.swimPower:this.moveSpeed,n.dirX++),e.up&&(n.swimBlock?n.ys-=this.swimPower:n.jumping||n.ys||(n.ys-=this.jumpPower,n.jumping=!0),n.dirY--),e.down&&(n.swimBlock&&(n.ys+=this.swimPower),n.dirY++),n.x+=n.xs,n.xs*=1-(n.swimBlock?this.waterDrag:this.moveDeceleration),n.y+=n.ys,n.ys*=1-(n.swimBlock?this.waterDrag:this.airDrag),n.ys+=this.gravity*(1-((null===(t=n.swimBlock)||void 0===t?void 0:t.type.density)||0));var o,s={},r=(0,H.Z)(A);try{for(r.s();!(o=r.n()).done;){var l=(0,h.Z)(o.value,2),u=l[0],c=l[1],d=u(n.x)+"_"+c(n.y);!s[d]&&i[d]&&(s[d]=!0,this.resolveCollision(i[d]))}}catch(Z){r.e(Z)}finally{r.f()}var p=0;delete n.swimBlock;var y,v=(0,H.Z)(A);try{for(v.s();!(y=v.n()).done;){var f=(0,h.Z)(y.value,2),m=f[0],g=f[1],w=i[m(n.x)+"_"+g(n.y)];if(w){if(w.type.collectible)return this.collect(w.type.id),this.deleteTile(w);w.type.healing<0&&(p=Math.max(p,-w.type.healing)),"liquid"===w.type.moveStyle&&(n.swimBlock=w)}}}catch(Z){v.e(Z)}finally{v.f()}if(n.swimBlock&&n.swimBlock!==a&&this.playSound(n.swimBlock.type.id),p&&this.setHealth(this.health-p),(Math.abs(n.x-n.px)>.1||Math.abs(n.y-n.py)>.1||n.dirX!==n.pdirX||n.dirY!==n.pdirY)&&(n.el.update(n),this.worldElement.update(n),n.px=n.x,n.py=n.y,n.pdirX=n.dirX,n.pdirY=n.dirY),e.space){var x=Math.atan2(n.dirY,n.dirX),k=Math.round(n.x+Math.cos(x)),b=Math.round(n.y+Math.sin(x)),M=this.getTile(k,b);null!==M&&void 0!==M&&M.type.edible&&(this.damage(M,this.eatSpeed),this.setHealth(this.health+M.type.healing*this.eatSpeed),this.setPoop(this.poop+M.type.makePoop*this.eatSpeed),this.playSound(M.type.id)),null!==M&&void 0!==M&&M.type.diggable&&this.damage(M,this.digSpeed)}}}},{key:"damage",value:function(e,t){if(null!==e&&void 0!==e&&e.type.hp)return void 0===e.hp&&(e.hp=e.type.hp),e.hp-=t,e.hp<=0?(e.type.dropsLoot?this.changeTileType(e,this.typeIndex[e.type.dropsLoot]):this.deleteTile(e),!0):void 0}},{key:"resolveCollision",value:function(e){var t=this.you;if(!e.type.collectible&&"liquid"!==e.type.moveStyle)if(e.type.healing<0&&(this.setHealth(this.health+Number(e.type.healing)),this.playSound(e.type.id),t.y-=.1),Math.abs(t.x-e.x)>Math.abs(t.y-e.y)){var n=e.x<t.x?-1:1;!t.jumping&&t.ys===this.gravity&&e.type.movable&&this.isEmpty(e.x+n,e.y)?this.moveTile(e.x,e.y,n,0):t.x=e.x+(t.x<e.x?-1:1),t.xs=0}else{if(t.y<e.y&&(t.jumping=!1),t.y=e.y+(t.y<e.y?-1:1),t.ys>this.fallDamageMin){var i=(t.ys-this.fallDamageMin)*this.fallDamageMult;this.setHealth(this.health-i),this.playSound("fallDamage");var a=Math.min(i,e.hp||1/0,e.type.hp||1/0);if(this.damage(e,i))return void(t.ys/=1+a)}t.ys=0}}},{key:"getTile",value:function(e,t){return this.world["".concat(e,"_").concat(t)]}},{key:"isEmpty",value:function(e,t){return!this.getTile(e,t)}},{key:"badGuyCanWalkOn",value:function(e,t){var n=this.getTile(e,t);return n&&"liquid"!==n.type.moveStyle}},{key:"moveTile",value:function(e,t,n,i){var a="".concat(e,"_").concat(t),o=this.world[a];delete this.world[a],o.x+=n,o.y+=i,this.world["".concat(o.x,"_").concat(o.y)]=o,o.el.update(o)}},{key:"iterateTiles",value:function(){for(var e in this.world){var t=this.world[e];if(!(!t.type.moveDelay||this.frame%t.type.moveDelay>0||Math.abs(this.you.x-t.x)>32||Math.abs(this.you.y-t.y)>32)){if(this.isEmpty(t.x,t.y+1))this.moveTile(t.x,t.y,0,1);else if("liquid"===t.type.moveStyle){var n=this.isEmpty(t.x-1,t.y),i=this.isEmpty(t.x+1,t.y);n&&i?this.moveTile(t.x,t.y,Math.random()<.5?1:-1,0):n?this.moveTile(t.x,t.y,-1,0):i&&this.moveTile(t.x,t.y,1,0)}else"patrol"===t.type.moveStyle&&(t.dirX||(t.dirX=1),this.isEmpty(t.x+t.dirX,t.y)&&this.badGuyCanWalkOn(t.x+t.dirX,t.y+1)?this.moveTile(t.x,t.y,t.dirX,0):t.dirX*=-1);if("m"===t.type.id){var a,o=!1,s=(0,H.Z)(j);try{for(s.s();!(a=s.n()).done;){var r=(0,h.Z)(a.value,2),l=r[0],u=r[1],c=this.getTile(t.x+l,t.y+u);c&&(c.type.hp||"a"===c.type.id)&&("a"===c.type.id&&(o=!0),this.deleteTile(c))}}catch(d){s.e(d)}finally{s.f()}o&&this.changeTileType(t,this.typeIndex.s)}}}}},{key:"setHealth",value:function(e){this.health=Math.max(0,Math.min(this.maxHealth,e)),this.hud.healthBar.update(Math.ceil(this.health),this.maxHealth,this.health>30?"green":"red"),e<=0&&(this.playSound("gameOver"),this.rootElement.innerHTML+='<div class="youDead"><h1>you dead</h1><h2>press R to try again</h2></div>')}},{key:"numCollected",value:function(e){return this.collectibles[e]||0}},{key:"setCollectible",value:function(e,t){this.collectibles[e]=t,this.hud.updateCounter(this.typeIndex[e],t)}},{key:"collect",value:function(e){this.setCollectible(e,this.numCollected(e)+1),this.playSound(e)}},{key:"setPoop",value:function(e){this.poop=Math.max(0,Math.min(this.maxPoop,e)),this.hud.poopBar.update(Math.floor(this.poop),this.maxPoop,"saddleBrown")}},{key:"makePoop",value:function(){if(!(this.poop<1)){var e=this.you,t=this.world,n=this.typeIndex,i=Math.atan2(e.dirY,e.dirX)+Math.PI,a=Math.round(e.x+Math.cos(i)),o=Math.round(e.y+Math.sin(i));a===e.x&&o===e.y||t["".concat(a,"_").concat(o)]||(this.addTile({x:a,y:o,type:n.p}),this.setPoop(this.poop-1),this.playSound("p"))}}},{key:"updateViewport",value:function(){this.worldElement.update(this.you)}},{key:"interact",value:function(){var e,t,n=this.you,i=Math.atan2(n.dirY,n.dirX),a=Math.round(n.x+Math.cos(i)),o=Math.round(n.y+Math.sin(i));null===(e=this.getTile(a,o))||void 0===e||null===(t=e.onSpace)||void 0===t||t.call(e,this)}}]),e}(),G=function(){var e=(0,o.Z)(r().mark((function e(t){var n,i,a,o,s,l,u,h,d,p,y,v,f,m,g,w,x,k,b,M;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(location.hash.length>1)try{o=JSON.parse(atob(location.hash.slice(1)))}catch(r){console.log("bad hash",r)}return s="worlds/".concat((0,c.kQ)(null===(n=o)||void 0===n?void 0:n.worldId)?o.worldId:O.rZ,"/world"),e.next=4,(0,O.mu)(["tileTypes",s,"gameConfig"]);case 4:for(l=e.sent,u=l.tileTypes,h=l.gameConfig,d=l[s],p={},v=0,f=Object.values(u);v<f.length;v++)m=f[v],p[m.id]=m;for(g in d)w=d[g],x=w.x,k=w.y,b=w.tileType,M=w.onSpace,"w"===b?(y={x:x,y:k},delete d[g]):p[b]?d[g]={x:x,y:k,type:p[b],onSpace:Y(M)}:delete d[g];return void 0!==(null===(i=o)||void 0===i?void 0:i.x)&&void 0!==(null===(a=o)||void 0===a?void 0:a.y)&&(y.x=o.x,y.y=o.y),e.abrupt("return",new _(y,d,h,p,t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=!1,W=document.querySelector("#root"),K=function e(){if(document.hasFocus()&&i){z&&(z=!1,document.body.style.opacity=1);var t=a.getPressing();i.dialog.isOpen||i.iterate(t)}else z||(z=!0,document.body.style.opacity=.5);requestAnimationFrame(e)},V=function(){var e=(0,o.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(W);case 2:i=e.sent,a=new P({onPress:t=function(e){i.dialog.isOpen?"space"===e&&i.dialog.hasChoices()?i.dialog.choose():i.dialog.next():"poop"===e?i.makePoop():"space"===e&&i.interact()}},W,[new D({onPress:t})]),window.addEventListener("resize",(function(){i.updateViewport()})),K();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();V()},457:function(e,t,n){n.d(t,{Ds:function(){return d},HK:function(){return c},M8:function(){return l},P2:function(){return p},aW:function(){return h},an:function(){return r},kQ:function(){return u}});var i=n(982),a=n(885),o=n(762),s=n(413),r=function(e,t){var n=(0,s.Z)({},t);return delete n[e],n},l=function(){return Date.now().toString(36)+":"+Math.random().toString(36).slice(2)},u=function(e){return/^[0-9a-z]{8,}:[0-9a-z]+$/.test(e)},c=function(e,t){var n,i={},a=(0,o.Z)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;i[e(s)]=s}}catch(r){a.e(r)}finally{a.f()}return i},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).map((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return(0,s.Z)({key:n},i)}))},d=function(e,t){var n,i=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,a)}),t)};return i.cancel=function(){return clearTimeout(n)},i},p=function(e,t){var n,a,o=!1,s=function s(){for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];o?a=l:(o=!0,n=setTimeout((function(){e.apply(void 0,l),o=!1,a&&s.apply(void 0,(0,i.Z)(a)),a=void 0}),t))};return s.cancel=function(){return clearTimeout(n)},s}},546:function(e,t,n){n.d(t,{V:function(){return i}});var i=function(e){return null!==e&&void 0!==e&&e.image?"no-repeat center/contain url(".concat(e.image,")"):null===e||void 0===e?void 0:e.color}},147:function(e){e.exports={i8:"0.1.23"}}}]);
//# sourceMappingURL=516.75faeb82.chunk.js.map