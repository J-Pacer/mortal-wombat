{"version":3,"file":"static/js/934.108cf239.chunk.js","mappings":"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","sources":["hooks/useUserIndex.js","hooks/useCoords.js","hooks/useLocationHash.js","hooks/useCursors.js","Components/common/Pane.js","hooks/useStatePersist.js","Components/ErrorBanner.js","Components/Login.js","Components/Toolbar.js","Components/Cursors.js","Components/WorldEditor.js","Components/Nav.js","Components/common/FormThing.js","Components/TileTypeEditor.js","Components/GameConfig.js","Components/HereNow.js","Components/MyWorlds.js","utils/worldToCanvas.js","Components/App.js","utils/makeButtons.js","hooks/useErrors.js","hooks/useUser.js","hooks/useTileTypes.js","hooks/useWorld.js","editorMain.js","firebase.js","utils.js","utils/getBackground.js"],"sourcesContent":["import {useEffect, useState} from 'react';\nimport {indexBy} from '../utils';\nimport {listen} from '../firebase';\n\nconst indexUsers = (users) => indexBy((u) => u.email, Object.values(users));\n\nexport const useUserIndex = (onError) => {\n  const [userIndex, setUserIndex] = useState({});\n  useEffect(\n    () => listen('users', (users) => setUserIndex(indexUsers(users)), onError),\n    []\n  );\n  return userIndex;\n};\n","import {useEffect, useState} from 'react';\n\nconst mapping = {\n  KeyS: 'down',\n  KeyA: 'left',\n  KeyW: 'up',\n  KeyD: 'right',\n  ArrowUp: 'up',\n  ArrowDown: 'down',\n  ArrowLeft: 'left',\n  ArrowRight: 'right',\n};\n\nconst MOVE_AMOUNT = 4;\n\nexport const useCoords = (initialX = 0, initialY = 0) => {\n  const [xCoord, setXCoord] = useState(initialX);\n  const [yCoord, setYCoord] = useState(initialY);\n\n  useEffect(() => {\n    const onkeyDown = (e) => {\n      if (e.target !== document.body) return;\n      const dir = mapping[e.code];\n      if (dir === 'up') setYCoord((y) => y - MOVE_AMOUNT);\n      if (dir === 'down') setYCoord((y) => y + MOVE_AMOUNT);\n      if (dir === 'left') setXCoord((x) => x - MOVE_AMOUNT);\n      if (dir === 'right') setXCoord((x) => x + MOVE_AMOUNT);\n    };\n    window.addEventListener('keydown', onkeyDown);\n    return () => {\n      window.removeEventListener('keydown', onkeyDown);\n    };\n  }, []);\n\n  return {xCoord, yCoord, setXCoord, setYCoord};\n};\n","import {useEffect} from 'react';\nimport {debounce, isGuid} from '../utils';\n\nconst setHash = debounce((...args) => {\n  location.hash = args.join('/');\n}, 1000);\n\nexport const useLocationHash = ({\n  worldId,\n  xCoord,\n  yCoord,\n  scale,\n  setWorldId,\n  setXCoord,\n  setYCoord,\n  setScale,\n}) => {\n  useEffect(() => {\n    setHash(worldId, xCoord, yCoord, scale);\n    return setHash.cancel;\n  }, [worldId, scale, xCoord, yCoord]);\n\n  useEffect(() => {\n    const onHashChange = () => {\n      const [id, x, y, sc] = location.hash.slice(1).split('/');\n      if ((!id || isGuid(id)) && [x, y, sc].every((p) => !isNaN(p))) {\n        setWorldId(id);\n        setXCoord(Number(x));\n        setYCoord(Number(y));\n        setScale(Number(sc));\n      } else {\n        console.log('bad hash');\n        location.hash = [worldId || '', xCoord, yCoord, scale].join('/');\n      }\n    };\n    onHashChange();\n    window.addEventListener('hashchange', onHashChange);\n    return () => {\n      window.removeEventListener('hashchange', onHashChange);\n    };\n  }, []);\n};\n","import {serverTimestamp} from 'firebase/database';\nimport {useEffect, useState} from 'react';\nimport {listen, update} from '../firebase';\nimport {guid, throttle} from '../utils';\n\nexport const sessionTimeOut = 15 * 1000;\nexport const sessionId = guid();\n\nexport const getLatestTimestamp = (cursors) => {\n  let latestTimestamp = 0;\n  for (const key in cursors) {\n    latestTimestamp = Math.max(latestTimestamp, cursors[key].tstamp);\n  }\n  return latestTimestamp;\n};\n\nconst cullCursors = (cursors, worldId, onError) => {\n  const culledCursors = {};\n  const latestTimestamp = getLatestTimestamp(cursors);\n  for (const key in cursors) {\n    if (latestTimestamp - cursors[key].tstamp > sessionTimeOut) {\n      culledCursors[`worlds/${worldId}/cursors/${key}`] = null;\n    }\n  }\n  update(culledCursors, onError);\n};\n\nexport const useCursors = (onError, worldId) => {\n  const [cursors, setCursors] = useState({});\n  useEffect(() => {\n    if (worldId) {\n      return listen(`worlds/${worldId}/cursors`, setCursors, onError);\n    }\n  }, [worldId]);\n\n  useEffect(() => {\n    if (Math.random() < 0.01) {\n      cullCursors(cursors, worldId, onError);\n    }\n  }, [cursors, worldId]);\n  return cursors;\n};\n\nexport const setCursor = throttle(\n  (user, mouseX, mouseY, worldId, xCoord, yCoord, scale, onError) => {\n    if (worldId) {\n      update(\n        {\n          [`worlds/${worldId}/cursors/${sessionId}`]: {\n            user: user.email,\n            mouseX,\n            mouseY,\n            left: xCoord - innerWidth / scale / 2,\n            top: yCoord - innerHeight / scale / 2,\n            width: innerWidth / scale,\n            height: innerHeight / scale,\n            tstamp: serverTimestamp(),\n          },\n        },\n        onError\n      );\n    }\n  },\n  500\n);\n","import './pane.css';\n\nexport const Pane = ({className, hide, label, children}) => (\n  <div className={`pane ${className}`}>\n    <div className=\"paneHeader\">\n      <a onClick={hide}>\n        <i className=\"fa-solid fa-x\"></i>\n      </a>\n      <strong>{label}</strong>\n    </div>\n    <div className=\"paneBody\">{children}</div>\n  </div>\n);\n","import {useEffect, useState} from 'react';\n\nconst parseJSON = (str, defaultVal) => {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    console.error(e);\n    return defaultVal;\n  }\n};\n\nexport const useStatePersist = (key, initial) => {\n  const [val, setVal] = useState(\n    localStorage[key] === undefined\n      ? initial\n      : parseJSON(localStorage[key], initial)\n  );\n\n  useEffect(() => {\n    localStorage[key] = JSON.stringify(val);\n  }, [val]);\n\n  return [val, setVal];\n};\n","import './errorBanner.css';\n\nexport const ErrorBanner = ({errors, clearError}) =>\n  Object.keys(errors).length > 0 && (\n    <div className=\"errorBanner\">\n      {Object.entries(errors).map(([key, err]) => (\n        <div key={key}>\n          {err} <a onClick={() => clearError(key)}>[x]</a>\n        </div>\n      ))}\n    </div>\n  );\n","import {useState} from 'react';\nimport {logIn} from '../firebase';\nimport './login.css';\n\nexport const Login = ({onError}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <div style={{width: 300, margin: '50px auto'}}>\n      <form\n        className=\"login\"\n        onSubmit={async (e) => {\n          e.preventDefault();\n          try {\n            await logIn(email, password);\n          } catch (e) {\n            onError(e.message);\n          }\n        }}\n      >\n        {/* <h1>Log In</h1> */}\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button style={{width: '100%'}}>Log In</button>\n      </form>\n\n      {/* <div style={{margin: '30px 0'}}>or</div>\n\n      <form\n        className=\"login\"\n        onSubmit={async (e) => {\n          e.preventDefault();\n          try {\n            await logIn(email, password);\n          } catch (e) {\n            onError(e.message);\n          }\n        }}\n      >\n        <h1>Register</h1>\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button>Register</button>\n      </form> */}\n    </div>\n  );\n};\n","import {getBackground} from '../utils/getBackground';\nimport './toolbar.css';\n\nexport const Toolbar = ({\n  tileTypes,\n  selectedTileTypeId,\n  setSelectedTileTypeId,\n  showTileTypeEditor,\n  setShowTileTypeEditor,\n}) => (\n  <div className=\"toolBar\">\n    {Object.values(tileTypes)\n      .sort((a, b) => a.order - b.order)\n      .map((type) => (\n        <div\n          key={type.label}\n          className={\n            'tileType' + (selectedTileTypeId === type.id ? ' selected' : '')\n          }\n          style={{background: getBackground(type)}}\n          title={\n            showTileTypeEditor ? '' : 'Double click to edit tile properties.'\n          }\n          onClick={() => {\n            setShowTileTypeEditor(false);\n            setSelectedTileTypeId(type.id);\n          }}\n          onDoubleClick={() =>\n            type.id && !type.id.startsWith('_') && setShowTileTypeEditor(true)\n          }\n        >\n          <label>{type.label}</label>\n        </div>\n      ))}\n  </div>\n);\n","import {Fragment} from 'react';\nimport {\n  getLatestTimestamp,\n  sessionId,\n  sessionTimeOut,\n} from '../hooks/useCursors';\n\nexport const CSS_SIZE = 32;\n\nexport const Cursors = ({cursors, userIndex, scale}) => {\n  const latestTimestamp = getLatestTimestamp(cursors);\n  return Object.entries(cursors).map(\n    ([key, {user, left, top, width, height, tstamp, mouseX, mouseY}]) => {\n      if (key === sessionId || latestTimestamp - tstamp > sessionTimeOut)\n        return null;\n\n      const opacity = 1 - (latestTimestamp - tstamp) / sessionTimeOut;\n      return (\n        <Fragment key={key}>\n          <div\n            className=\"cursorView\"\n            style={{\n              transform: `translate(${left * CSS_SIZE}px, ${top * CSS_SIZE}px)`,\n              width: width * CSS_SIZE,\n              height: height * CSS_SIZE,\n              opacity,\n            }}\n          >\n            <span style={{fontSize: (80 * CSS_SIZE) / scale + '%'}}>\n              {userIndex[user]?.name || user}\n            </span>\n          </div>\n          {mouseX && mouseY ? (\n            <div\n              className=\"mouseCursor\"\n              style={{\n                transform: `translate(${(mouseX + 0.5) * CSS_SIZE}px, ${\n                  (mouseY + 0.5) * CSS_SIZE\n                }px) scale(${CSS_SIZE / scale}) `,\n                opacity,\n              }}\n            >\n              <i className=\"fa-solid fa-arrow-pointer\"></i>\n              <span>{userIndex[user]?.name || user}</span>\n            </div>\n          ) : null}\n        </Fragment>\n      );\n    }\n  );\n};\n","import {getAuth} from 'firebase/auth';\nimport {serverTimestamp} from 'firebase/database';\nimport {memo, useCallback, useMemo, useRef} from 'react';\nimport {update} from '../firebase';\nimport {setCursor} from '../hooks/useCursors';\nimport {indexBy, objToArr} from '../utils';\nimport {getBackground} from '../utils/getBackground';\nimport {CSS_SIZE, Cursors} from './Cursors';\nimport './worldEditor.css';\n\nconst placeTile = (worldId, x, y, id, user, onError) =>\n  update(\n    {\n      [`worlds/${worldId}/world/${x}_${y}`]:\n        id === '_delete'\n          ? null\n          : {x, y, tileType: id, user: user.email, tstamp: serverTimestamp()},\n      [`worlds/${worldId}/lastEdited`]: serverTimestamp(),\n      [`worlds/${worldId}/lastEditedBy`]: getAuth().currentUser.email,\n    },\n    onError\n  );\n\nconst getCoords = (e, scale, xCoord, yCoord) => ({\n  x: Math.floor((e.clientX - innerWidth / 2) / scale) + xCoord,\n  y: Math.floor((e.clientY - innerHeight / 2) / scale) + yCoord,\n});\n\nconst getTitle = (user, tstamp, userIndex) => {\n  if (!user || !tstamp) return '';\n  const name = userIndex[user]?.name || user;\n  const date = new Date(tstamp).toLocaleString();\n  return `Placed by ${name} on ${date}`;\n};\n\nconst Tiles = ({world, tileTypeIndex, userIndex}) =>\n  Object.entries(world).map(([key, {x, y, tileType, user, tstamp}]) => (\n    <div\n      key={key}\n      className=\"tile\"\n      title={getTitle(user, tstamp, userIndex)}\n      style={{\n        transform: `translate(${x * CSS_SIZE}px, ${y * CSS_SIZE}px)`,\n        background: getBackground(tileTypeIndex[tileType]),\n      }}\n    />\n  ));\n\nconst TilesMemo = memo(Tiles);\n\nexport const WorldEditor = ({\n  world,\n  tileTypes,\n  selectedTileTypeId,\n  onError,\n  worldId,\n  xCoord,\n  yCoord,\n  scale,\n  user,\n  cursors,\n  userIndex,\n}) => {\n  // using a ref is much more performant than keeping mouse coords in state\n  const ghostRef = useRef();\n\n  const tileTypeIndex = useMemo(\n    () => indexBy((t) => t.id, objToArr(tileTypes)),\n    [tileTypes]\n  );\n\n  // This checks for invalid tiles in the world and outputs them along with an update object\n  // useEffect(() => {\n  //   const badData = Object.entries(world).filter(\n  //     ([, t]) => !tileTypeIndex[t.tileType]\n  //   );\n  //   if (badData.length) {\n  //     console.log(\n  //       'This is bad data',\n  //       badData.map((p) => p[1]),\n  //       JSON.stringify(\n  //         Object.fromEntries(badData.map(([key]) => [`world/${key}`, null]))\n  //       )\n  //     );\n  //   }\n  // }, [world, tileTypeIndex]);\n\n  const onClick = (e) => {\n    const {x, y} = getCoords(e, scale, xCoord, yCoord);\n    if (e.altKey) {\n      window.open(\n        location.href.replace(/\\?.*/, '') +\n          '#' +\n          btoa(JSON.stringify({worldId, x, y})),\n        '_blank'\n      );\n      e.preventDefault();\n      return false;\n    } else if (selectedTileTypeId) {\n      const currentType = world[`${x}_${y}`]?.tileType;\n      const t = e.shiftKey ? '_delete' : selectedTileTypeId;\n      if ((currentType || t !== '_delete') && currentType !== t) {\n        placeTile(worldId, x, y, t, user, onError);\n      }\n    }\n  };\n\n  const onMouseMove = useCallback(\n    (e) => {\n      const {x, y} = getCoords(e, scale, xCoord, yCoord);\n      if (selectedTileTypeId) {\n        const s = ghostRef.current?.style;\n        s.transform = `translate(${x * CSS_SIZE}px, ${y * CSS_SIZE}px)`;\n        if (e.buttons) onClick(e);\n      }\n      setCursor(user, x, y, worldId, xCoord, yCoord, scale, onError);\n    },\n    [scale, worldId, xCoord, yCoord, selectedTileTypeId, user]\n  );\n\n  const cx = innerWidth / 2 - xCoord * CSS_SIZE;\n  const cy = innerHeight / 2 - yCoord * CSS_SIZE;\n\n  return (\n    <div\n      id=\"worldEditor\"\n      className=\"world\"\n      onClick={onClick}\n      onMouseMove={onMouseMove}\n    >\n      <div\n        style={{\n          transformOrigin: `${innerWidth / 2}px ${innerHeight / 2}px`,\n          transform: `scale(${scale / CSS_SIZE}) translate(${cx}px,${cy}px)`,\n        }}\n      >\n        <Cursors cursors={cursors} userIndex={userIndex} scale={scale} />\n\n        <TilesMemo {...{world, tileTypeIndex, userIndex}} />\n\n        {selectedTileTypeId && (\n          <div\n            ref={ghostRef}\n            className=\"ghost tile\"\n            style={{\n              background: getBackground(tileTypeIndex[selectedTileTypeId]),\n            }}\n          ></div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import {logOut} from '../firebase';\nimport packageJSON from '../../package.json';\n\nexport const Nav = ({user, setScale, zoomAmt, userIndex, children}) => (\n  <nav>\n    {user && (\n      <div style={{float: 'right'}}>\n        <a onClick={() => setScale((s) => Math.round(s * zoomAmt))}>\n          <i className=\"fa-solid fa-magnifying-glass-plus\"></i>\n        </a>\n        <a onClick={() => setScale((s) => Math.round(s / zoomAmt))}>\n          <i className=\"fa-solid fa-magnifying-glass-minus\"></i>\n        </a>\n        Hi, {userIndex[user.email]?.name || user.email}!\n        <a onClick={logOut}>log out</a>\n      </div>\n    )}\n    <b>MW Collabitat v{packageJSON.version}</b>\n    {children}\n  </nav>\n);\n","const TextField = ({value = '', onChange}) => (\n  <input type=\"text\" value={value} onChange={(e) => onChange(e.target.value)} />\n);\n\nconst NumberField = ({value = '', onChange}) => (\n  <input\n    type=\"number\"\n    value={value}\n    onChange={(e) => onChange(e.target.value)}\n  />\n);\n\nconst Checkbox = ({value = false, onChange}) => (\n  <input\n    type=\"checkbox\"\n    checked={value}\n    onChange={(e) => onChange(e.target.checked)}\n  />\n);\n\nconst Select = ({value, onChange, options}) => (\n  <select value={value} onChange={(e) => onChange(e.target.value)}>\n    <option></option>\n    {options.map((o) => (\n      <option key={o} value={o}>\n        {o}\n      </option>\n    ))}\n  </select>\n);\n\nconst inputs = {\n  text: TextField,\n  number: NumberField,\n  checkbox: Checkbox,\n  select: Select,\n};\n\nexport const FormThing = ({fields, data, onChange}) =>\n  fields.map(({prop, label, type, info, show, options}) => {\n    if (show && !show(data)) return null;\n    const Field = inputs[type];\n    return (\n      <div key={prop} title={info}>\n        <label>{label}</label>\n        <Field\n          value={data?.[prop]}\n          onChange={(val) => onChange(val, prop)}\n          options={options}\n        />\n      </div>\n    );\n  });\n","import {update} from '../firebase';\nimport {objToArr} from '../utils';\nimport {FormThing} from './common/FormThing';\nimport './tileTypeEditor.css';\n\nconst fields = [\n  {\n    prop: 'label',\n    label: 'Label',\n    type: 'text',\n    info: 'The label you see in the tool bar below.',\n  },\n  {\n    prop: 'image',\n    label: 'Image URL',\n    type: 'text',\n    info: 'The image. uhduhhhh',\n  },\n  {\n    prop: 'color',\n    label: 'Color',\n    type: 'text',\n    info: 'The color to use if there is no image',\n  },\n  {\n    prop: 'hp',\n    label: 'HP',\n    type: 'number',\n    info: 'How much health does it have?',\n  },\n  {\n    prop: 'movable',\n    label: 'Movable',\n    type: 'checkbox',\n    info: 'Can you move it?',\n  },\n  {\n    prop: 'moveDelay',\n    label: 'Move Delay',\n    type: 'number',\n    info: 'How many frames does it wait to move? Smaller is faster.',\n  },\n  {\n    prop: 'moveStyle',\n    label: 'Move Style',\n    type: 'select',\n    info: 'How does it move?',\n    options: ['liquid', 'patrol'],\n    show: (data) => parseInt(data.moveDelay),\n  },\n  {\n    prop: 'healing',\n    label: 'Healing',\n    type: 'number',\n    info: 'How much does it heal (or hurt) when you eat/touch it (per frame)?',\n  },\n  {prop: 'edible', label: 'Edible', type: 'checkbox', info: 'Can you eat it?'},\n  {\n    prop: 'makePoop',\n    label: 'Make Poop',\n    type: 'number',\n    info: 'How much poop does it make?',\n    show: (data) => data.edible,\n  },\n  {\n    prop: 'diggable',\n    label: 'Diggable',\n    type: 'checkbox',\n    info: 'Can you dig it?',\n    show: (data) => !data.edible,\n  },\n  {\n    prop: 'collectible',\n    label: 'Collectible',\n    type: 'checkbox',\n    info: 'Can you collect it?',\n    show: (data) => !data.edible && !data.movable,\n  },\n  {\n    prop: 'order',\n    label: 'Order',\n    type: 'number',\n    info: 'The order it shows up in the toolbar below',\n  },\n\n  // {prop: 'movement', label: 'Movement', type: 'select', }\n];\n\nexport const TileTypeEditor = ({selectedTileTypeId, tileTypes, onError}) => {\n  const selectedTileType = objToArr(tileTypes).find(\n    (el) => el.id === selectedTileTypeId\n  );\n\n  return (\n    selectedTileType && (\n      <div className=\"tileTypeEditor\">\n        <p>\n          <span style={{color: 'orange'}}>\n            <i className=\"fa-solid fa-triangle-exclamation\"></i> WARNING\n          </span>{' '}\n          You can seriously mess up the game if you change these. Please write\n          them down and change them very carefully!\n        </p>\n        <FormThing\n          fields={fields}\n          data={selectedTileType}\n          onChange={(value, prop) => {\n            update(\n              {[`tileTypes/${selectedTileType.key}/${prop}`]: value},\n              onError\n            );\n          }}\n        />\n      </div>\n    )\n  );\n};\n","import {useEffect, useState} from 'react';\nimport {listen, update} from '../firebase';\nimport {FormThing} from './common/FormThing';\nimport './gameConfig.css';\n\nconst useConfig = (onError) => {\n  const [config, setConfig] = useState();\n  useEffect(() => listen('gameConfig', setConfig, onError), []);\n  return config;\n};\n\nconst fields = [\n  {\n    prop: 'digSpeed',\n    label: 'Wombat Digging Speed',\n    type: 'number',\n    info: 'How fast much can you dig in one frame?',\n  },\n  {\n    prop: 'eatSpeed',\n    label: 'Wombat Eating Speed',\n    type: 'number',\n    info: 'How fast much can you eat in one frame?',\n  },\n  {\n    prop: 'gravity',\n    label: 'Gravity',\n    type: 'number',\n    info: 'How strong is gravity?',\n  },\n  {\n    prop: 'health',\n    label: 'Wombat Starting Health',\n    type: 'number',\n    info: 'How much health do you start with?',\n  },\n  {\n    prop: 'maxHealth',\n    label: 'Wombat Max Health',\n    type: 'number',\n    info: 'How much health can you have?',\n  },\n  {\n    prop: 'poop',\n    label: 'Wombat Starting Poop',\n    type: 'number',\n    info: 'How much poop do you start with?',\n  },\n  {\n    prop: 'maxPoop',\n    label: 'Wombat Max Poop',\n    type: 'number',\n    info: 'How much poop can you hold?',\n  },\n  {\n    prop: 'jumpPower',\n    label: 'Wombat Jumping Power',\n    type: 'number',\n    info: 'How much jumping power do you start with?',\n  },\n  {\n    prop: 'moveSpeed',\n    label: 'Wombat Acceleration',\n    type: 'number',\n    info: 'How fast can you move?',\n  },\n  {\n    prop: 'moveDeceleration',\n    label: 'Wombat Deceleration',\n    type: 'number',\n    info: 'How fast can you slow down?',\n  },\n];\n\nexport const GameConfig = ({onError}) => {\n  const config = useConfig(onError);\n  return (\n    <div className=\"gameConfig\">\n      <p>\n        <span style={{color: 'orange'}}>\n          <i className=\"fa-solid fa-triangle-exclamation\"></i> WARNING\n        </span>{' '}\n        You can seriously mess up the game if you change these. Please write\n        them down and change them very carefully!\n      </p>\n      <FormThing\n        fields={fields}\n        data={config}\n        onChange={(value, prop) => {\n          update({[`gameConfig/${prop}`]: value}, onError);\n        }}\n      />\n    </div>\n  );\n};\n","import {getLatestTimestamp, sessionTimeOut} from '../hooks/useCursors';\n\nexport const HereNow = ({cursors, userIndex, worldId}) => {\n  const latestTimestamp = getLatestTimestamp(cursors);\n  return Object.entries(cursors)\n    .filter((c) => latestTimestamp - c[1].tstamp < sessionTimeOut)\n    .map(([key, {user, mouseX, mouseY}]) => (\n      <div key={key} style={{margin: 5}}>\n        {userIndex[user]?.name || user}\n        {mouseX && mouseY ? (\n          <a\n            style={{margin: '0 10px'}}\n            href={`#${worldId || ''}/${mouseX}/${mouseY}/32`}\n          >\n            go\n          </a>\n        ) : null}\n      </div>\n    ));\n};\n","import {getAuth} from 'firebase/auth';\nimport {serverTimestamp} from 'firebase/database';\nimport {useEffect, useRef, useState} from 'react';\nimport {loadData, update} from '../firebase';\nimport {guid} from '../utils';\nimport {worldToCanvas} from '../utils/worldToCanvas';\nimport './myWorlds.css';\n\nconst gotoWorld = (id) => {\n  location.hash = `${id}/0/0/32`;\n};\n\nconst createNewWorld = async () => {\n  const worldGuid = guid();\n\n  const worldName = prompt('Enter a name for your new world.');\n  if (!worldName) return;\n\n  await update({\n    [`worlds/${worldGuid}`]: {\n      worldName,\n      lastEdited: serverTimestamp(),\n      lastEditedBy: getAuth().currentUser.email,\n    },\n  });\n\n  gotoWorld(worldGuid);\n};\n\n// collabitat\n\nconst WorldCanvas = ({world, tileTypes}) => {\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    if (world && tileTypes) worldToCanvas(world, tileTypes, canvasRef.current);\n  }, [world, tileTypes]);\n\n  return <canvas ref={canvasRef}></canvas>;\n};\n\nconst WorldItem = ({\n  id,\n  item: {lastEdited, worldName, lastEditedBy, world},\n  userIndex,\n  tileTypes,\n}) => (\n  <button className=\"worldButton\" onClick={() => gotoWorld(id)}>\n    <div className=\"canvasContainer\">\n      <WorldCanvas world={world} tileTypes={tileTypes} />{' '}\n    </div>\n    {worldName || '???'}\n    {lastEdited && (\n      <span className=\"lastEdited\">\n        last edited by {userIndex[lastEditedBy]?.name || lastEditedBy || '???'}{' '}\n        on {new Date(lastEdited).toLocaleString()}\n      </span>\n    )}\n  </button>\n);\n\nconst loadWorlds = async (setWorlds) => {\n  const {worlds} = await loadData(['worlds']);\n  setWorlds(worlds);\n};\n\nexport const MyWorlds = ({userIndex, tileTypes}) => {\n  const [worlds, setWorlds] = useState([]);\n\n  useEffect(() => {\n    loadWorlds(setWorlds);\n  }, []);\n\n  return (\n    <div className=\"myWorlds\">\n      <div style={{float: 'right'}}>\n        <button\n          onClick={async () => {\n            await createNewWorld();\n            await loadWorlds(setWorlds);\n          }}\n        >\n          <i className=\"fa-solid fa-circle-plus\"></i> Create a New World\n        </button>\n      </div>\n      <button onClick={() => loadWorlds(setWorlds)}>\n        <i className=\"fa-solid fa-arrows-rotate\"></i> Refresh List\n      </button>\n\n      <div className=\"scrollBox\">\n        {Object.entries(worlds)\n          .sort((a, b) => b[1].lastEdited - a[1].lastEdited)\n          .map(([key, item]) => (\n            <WorldItem\n              key={key}\n              id={key}\n              item={item}\n              userIndex={userIndex}\n              tileTypes={tileTypes}\n            />\n          ))}\n      </div>\n    </div>\n  );\n};\n","import {indexBy, objToArr} from '../utils';\n\nexport const worldToCanvas = (\n  world,\n  tileTypes,\n  canvas = document.createElement('canvas')\n) => {\n  const tileTypeIndex = indexBy((t) => t.id, objToArr(tileTypes));\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  for (const key in world) {\n    const {x, y} = world[key];\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  }\n  canvas.width = maxX - minX + 1;\n  canvas.height = maxY - minY + 1;\n  const ctx = canvas.getContext('2d');\n  for (const key in world) {\n    const {x, y, tileType} = world[key];\n    ctx.fillStyle = tileTypeIndex[tileType]?.color;\n    ctx.fillRect(x - minX, y - minY, 1, 1);\n  }\n  return canvas;\n};\n","import './App.css';\nimport {useEffect, useState} from 'react';\n\nimport {useErrors} from '../hooks/useErrors';\nimport {useUser} from '../hooks/useUser';\nimport {useUserIndex} from '../hooks/useUserIndex';\nimport {useTileTypes} from '../hooks/useTileTypes';\nimport {useCoords} from '../hooks/useCoords';\nimport {useWorld} from '../hooks/useWorld';\nimport {useLocationHash} from '../hooks/useLocationHash';\nimport {setCursor, useCursors} from '../hooks/useCursors';\n\nimport {Pane} from './common/Pane';\nimport {makeButtons} from '../utils/makeButtons';\n\nimport {ErrorBanner} from './ErrorBanner';\nimport {Login} from './Login';\nimport {Toolbar} from './Toolbar';\nimport {WorldEditor} from './WorldEditor';\nimport {Nav} from './Nav';\nimport {TileTypeEditor} from './TileTypeEditor';\nimport {GameConfig} from './GameConfig';\nimport {HereNow} from './HereNow';\nimport {MyWorlds} from './MyWorlds';\nimport {defaultWorldId} from '../firebase';\n\nconst zoomAmt = 2;\n\nconst paneConfigs = [\n  {\n    key: 'instructions',\n    buttonLabel: 'Instructions',\n    paneLabel: 'Instructions',\n    icon: 'circle-question',\n  },\n  {\n    key: 'gameConfig',\n    buttonLabel: 'Config',\n    paneLabel: 'Game Config',\n    icon: 'toolbox',\n  },\n  {key: 'tileTypeEditor', paneLabel: 'Tile Type Editor', hideButton: true},\n  {\n    key: 'hereNow',\n    buttonLabel: 'People',\n    paneLabel: 'Editing Now',\n    icon: 'person',\n  },\n  {\n    key: 'myWorlds',\n    buttonLabel: 'Worlds',\n    paneLabel: 'Worlds',\n    icon: 'earth-americas',\n  },\n];\n\nexport const App = () => {\n  const [errors, onError, clearError] = useErrors();\n\n  // local state\n  const [worldId, setWorldId] = useState(defaultWorldId);\n  const [selectedTileTypeId, setSelectedTileTypeId] = useState();\n  const {xCoord, yCoord, setXCoord, setYCoord} = useCoords(0, 0);\n  const [scale, setScale] = useState(32);\n\n  // firebase state\n  const user = useUser();\n  const userIndex = useUserIndex(onError);\n  const tileTypes = useTileTypes(onError);\n  const world = useWorld(onError, worldId);\n  const cursors = useCursors(onError, worldId);\n\n  // pane toggles\n  const Panes = makeButtons(paneConfigs);\n\n  useLocationHash({\n    worldId,\n    xCoord,\n    yCoord,\n    scale,\n    setWorldId,\n    setXCoord,\n    setYCoord,\n    setScale,\n  });\n\n  useEffect(() => {\n    if (user)\n      setCursor(user, null, null, worldId, xCoord, yCoord, scale, onError);\n  }, [user, worldId, xCoord, yCoord, scale]);\n\n  return (\n    <>\n      <Nav {...{user, scale, setScale, zoomAmt, userIndex}}>\n        {Object.values(Panes).map(({button}) => button)}\n      </Nav>\n\n      <ErrorBanner errors={errors} clearError={clearError} />\n\n      {user ? (\n        <div className=\"appContainer\">\n          {selectedTileTypeId &&\n            tileTypes &&\n            Panes.tileTypeEditor.show &&\n            Object.values(tileTypes).some(\n              (t) => t.id === selectedTileTypeId\n            ) && (\n              <Pane {...Panes.tileTypeEditor.paneProps}>\n                <TileTypeEditor\n                  selectedTileTypeId={selectedTileTypeId}\n                  tileTypes={tileTypes}\n                  onError={onError}\n                />\n              </Pane>\n            )}\n\n          {Panes.gameConfig.show && (\n            <Pane {...Panes.gameConfig.paneProps}>\n              <GameConfig onError={onError} />\n            </Pane>\n          )}\n\n          {worldId && Panes.hereNow.show && (\n            <Pane {...Panes.hereNow.paneProps}>\n              <HereNow\n                cursors={cursors}\n                userIndex={userIndex}\n                worldId={worldId}\n              />\n            </Pane>\n          )}\n\n          {Panes.instructions.show && (\n            <Pane {...Panes.instructions.paneProps}>\n              <p>Use the arrow keys or WASD to move around the map.</p>\n              <p>\n                Click a tile type at the bottom. Click on the map to place it.\n              </p>\n              <p>Shift+Click a tile to delete it.</p>\n              <p>\n                You can zoom in and out with{' '}\n                <i className=\"fa-solid fa-magnifying-glass-plus\"></i> and{' '}\n                <i className=\"fa-solid fa-magnifying-glass-minus\"></i> in the\n                upper right.\n              </p>\n              <p>\n                Share your URL with other editors to show them what you made.\n              </p>\n              <p>\n                To test what you have made, Alt+Click where you want to start\n                testing. Share your game URL to share your starting point.\n              </p>\n            </Pane>\n          )}\n\n          {Panes.myWorlds.show && (\n            <Pane {...Panes.myWorlds.paneProps}>\n              <MyWorlds userIndex={userIndex} tileTypes={tileTypes} />\n            </Pane>\n          )}\n\n          {tileTypes && (\n            <div className=\"toolContainer\">\n              <Toolbar\n                {...{\n                  tileTypes,\n                  selectedTileTypeId,\n                  setSelectedTileTypeId,\n                  showTileTypeEditor: Panes.tileTypeEditor.show,\n                  setShowTileTypeEditor: Panes.tileTypeEditor.setShow,\n                }}\n              />\n            </div>\n          )}\n\n          {worldId && tileTypes && (\n            <div className=\"worldEditorContainer\">\n              <WorldEditor\n                {...{\n                  world,\n                  selectedTileTypeId,\n                  tileTypes,\n                  onError,\n                  worldId,\n                  xCoord,\n                  yCoord,\n                  scale,\n                  user,\n                  cursors,\n                  userIndex,\n                }}\n              />\n            </div>\n          )}\n        </div>\n      ) : (\n        <Login onError={onError} />\n      )}\n    </>\n  );\n};\n","import {useStatePersist} from '../hooks/useStatePersist';\n\nexport const makeButtons = (config) =>\n  Object.fromEntries(\n    config.map(({key, buttonLabel, paneLabel, icon, hideButton}) => {\n      const [show, setShow] = useStatePersist('show' + buttonLabel, false);\n\n      const button = !hideButton && (\n        <a\n          key={key}\n          className={show ? 'active' : ''}\n          onClick={() => setShow((s) => !s)}\n        >\n          <i className={`fa-solid fa-${icon}`} /> {buttonLabel}\n        </a>\n      );\n\n      const paneProps = {\n        label: paneLabel,\n        className: key + 'Container',\n        hide: () => setShow(false),\n      };\n\n      return [key, {button, show, setShow, paneProps}];\n    })\n  );\n","import {useState} from 'react';\nimport {dissoc, guid} from '../utils';\n\nexport const useErrors = () => {\n  const [errors, setErrors] = useState({});\n  const onError = (msg) => {\n    setErrors((e) => ({...e, [guid()]: msg}));\n  };\n  const clearError = (key) => setErrors((e) => dissoc(key, e));\n  return [errors, onError, clearError];\n};\n","import {useEffect, useState} from 'react';\nimport {listenUser} from '../firebase';\n\nexport const useUser = () => {\n  const [user, setUser] = useState();\n  useEffect(() => listenUser(setUser), []);\n  return user;\n};\n","import {useEffect, useState} from 'react';\nimport {listen} from '../firebase';\n\nexport const useTileTypes = (onError) => {\n  const [tileTypes, setTileTypes] = useState();\n  useEffect(() => listen('tileTypes', setTileTypes, onError), []);\n  return tileTypes;\n};\n","import {useEffect, useState} from 'react';\nimport {listen} from '../firebase';\n\nexport const useWorld = (onError, worldId) => {\n  const [world, setWorld] = useState({});\n  useEffect(() => {\n    if (worldId) {\n      return listen(\n        (worldId ? `worlds/${worldId}/` : '') + 'world',\n        setWorld,\n        onError\n      );\n    }\n  }, [worldId]);\n  return world;\n};\n","import React from 'react';\nimport {createRoot} from 'react-dom/client';\nimport {App} from './Components/App';\n\ndocument.title = 'Mortal Wombat Editor';\n\ncreateRoot(document.querySelector('#root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","import {initializeApp} from 'firebase/app';\nimport {\n  ref,\n  getDatabase,\n  update as _update,\n  onValue,\n  off,\n  get,\n  child,\n} from 'firebase/database';\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\n\ninitializeApp({\n  apiKey: 'AIzaSyBEserPzSUos4MT3XRO8NKAO2oVk1-LS-I',\n  authDomain: 'mortal-wombat-8c76a.firebaseapp.com',\n  projectId: 'mortal-wombat-8c76a',\n  storageBucket: 'mortal-wombat-8c76a.appspot.com',\n  messagingSenderId: '929181149015',\n  appId: '1:929181149015:web:33a7f450bcdbb06ae64012',\n  measurementId: 'G-JL6HCMYYBS',\n});\n\n/*\nData:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/database/mortal-wombat-8c76a-default-rtdb/data\nData Docs: https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=0\nList Docs: https://firebase.google.com/docs/database/web/lists-of-data?hl=en&authuser=0\n\nUsers:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/authentication/users\nUser Docs: https://firebase.google.com/docs/auth/web/manage-users\n*/\n\nconst db = getDatabase();\nconst auth = getAuth();\nconst dbRef = ref(db);\n\nexport const defaultWorldId = 'l31p2np9:dy828s8l3wv';\n\n// {path1: val1, path2: val2}\nexport const update = (updates, onError) => {\n  try {\n    // console.log('updates', updates);\n    return _update(dbRef, updates);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\nif (location.host === 'localhost:3000') {\n  window._update = async (x) => await _update(dbRef, x);\n}\n\nexport const loadData = async (things) =>\n  Object.fromEntries(\n    await Promise.all(\n      things.map(async (t) => [t, (await get(child(dbRef, t))).val()])\n    )\n  );\n\nexport const listen = (pathStr, onChange, onError) => {\n  try {\n    const r = ref(db, pathStr);\n    onValue(r, (snapshot) => onChange(snapshot.val() || {}));\n    return () => off(r);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\n// export const createUser = async (email, pwd) => {\n//   try {\n//     const result = await createUserWithEmailAndPassword(auth, email, pwd);\n//     return result.user;\n//   } catch (e) {\n//     console.error(e);\n//     return e.message;\n//   }\n// };\n\nexport const logIn = (email, pwd) =>\n  signInWithEmailAndPassword(auth, email, pwd);\n\nexport const listenUser = (onChange) => onAuthStateChanged(auth, onChange);\n\nexport const logOut = () => signOut(auth);\n","// export const assocPath = ([first, ...rest], val, obj) => {\n//   const copy = Array.isArray(obj) ? [...obj] : {...obj};\n//   copy[first] = rest.length ? assocPath(rest, val, copy[first]) : val;\n//   return copy;\n// };\n\nexport const dissoc = (key, obj) => {\n  const copy = {...obj};\n  delete copy[key];\n  return copy;\n};\n\nexport const guid = () =>\n  Date.now().toString(36) + ':' + Math.random().toString(36).slice(2);\n\nexport const isGuid = (str) => /^[0-9a-z]{8,}:[0-9a-z]+$/.test(str);\n\nexport const groupBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) {\n    const key = func(el);\n    (res[key] = res[key] || []).push(el);\n  }\n  return res;\n};\n\nexport const indexBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) res[func(el)] = el;\n  return res;\n};\n\nexport const objToArr = (obj = {}) =>\n  Object.entries(obj).map(([key, el]) => ({key, ...el}));\n\nexport const debounce = (func, delay) => {\n  let timeout;\n  const f = (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\nexport const throttle = (func, delay) => {\n  let timeout;\n  let running = false;\n  let runAgainArgs;\n  const f = (...args) => {\n    if (running) {\n      runAgainArgs = args;\n      return;\n    }\n    running = true;\n    timeout = setTimeout(() => {\n      func(...args);\n      running = false;\n      if (runAgainArgs) {\n        f(...runAgainArgs);\n      }\n      runAgainArgs = undefined;\n    }, delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\n// const memoize = (func) => {\n//   const cache = {};\n//   return (...args) => {\n//     const key = JSON.stringify(args);\n//     if (cache[key] === undefined) cache[key] = func(...args);\n//     return cache[key];\n//   };\n// };\n","export const getBackground = (type) =>\n  type?.image ? `no-repeat center/contain url(${type.image})` : type?.color;\n"],"names":["useUserIndex","onError","useState","userIndex","setUserIndex","useEffect","listen","users","indexBy","u","email","Object","values","indexUsers","mapping","KeyS","KeyA","KeyW","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","setHash","debounce","args","location","hash","join","sessionTimeOut","sessionId","guid","getLatestTimestamp","cursors","latestTimestamp","key","Math","max","tstamp","useCursors","worldId","setCursors","random","culledCursors","update","cullCursors","setCursor","throttle","user","mouseX","mouseY","xCoord","yCoord","scale","left","innerWidth","top","innerHeight","width","height","serverTimestamp","Pane","className","hide","label","children","onClick","useStatePersist","initial","undefined","localStorage","str","defaultVal","JSON","parse","e","console","error","parseJSON","val","setVal","stringify","ErrorBanner","errors","clearError","keys","length","entries","map","err","Login","setEmail","password","setPassword","style","margin","onSubmit","preventDefault","logIn","message","type","placeholder","value","onChange","target","Toolbar","tileTypes","selectedTileTypeId","setSelectedTileTypeId","showTileTypeEditor","setShowTileTypeEditor","sort","a","b","order","id","background","getBackground","title","onDoubleClick","startsWith","CSS_SIZE","Cursors","opacity","Fragment","transform","fontSize","name","getCoords","x","floor","clientX","y","clientY","getTitle","date","Date","toLocaleString","Tiles","world","tileTypeIndex","tileType","TilesMemo","memo","WorldEditor","ghostRef","useRef","useMemo","t","objToArr","altKey","window","open","href","replace","btoa","currentType","shiftKey","getAuth","currentUser","placeTile","onMouseMove","useCallback","current","buttons","cx","cy","transformOrigin","ref","Nav","setScale","zoomAmt","float","s","round","logOut","packageJSON","inputs","text","number","checkbox","checked","select","options","o","FormThing","fields","data","prop","info","show","Field","parseInt","moveDelay","edible","movable","TileTypeEditor","selectedTileType","find","el","color","GameConfig","config","setConfig","useConfig","HereNow","filter","c","gotoWorld","createNewWorld","worldGuid","worldName","prompt","lastEdited","lastEditedBy","WorldCanvas","canvasRef","canvas","document","createElement","minX","Infinity","minY","maxX","maxY","min","ctx","getContext","fillStyle","fillRect","worldToCanvas","WorldItem","item","loadWorlds","setWorlds","loadData","worlds","MyWorlds","paneConfigs","buttonLabel","paneLabel","icon","hideButton","App","setErrors","msg","dissoc","useErrors","defaultWorldId","setWorldId","initialX","initialY","setXCoord","setYCoord","onkeyDown","body","dir","code","addEventListener","removeEventListener","useCoords","setUser","listenUser","useUser","setTileTypes","useTileTypes","setWorld","useWorld","Panes","fromEntries","setShow","paneProps","button","cancel","onHashChange","slice","split","sc","isGuid","every","p","isNaN","log","Number","useLocationHash","tileTypeEditor","some","gameConfig","hereNow","instructions","myWorlds","createRoot","querySelector","render","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getDatabase","auth","dbRef","updates","_update","host","things","Promise","all","get","child","pathStr","r","onValue","snapshot","off","pwd","signInWithEmailAndPassword","onAuthStateChanged","signOut","obj","copy","now","toString","test","func","arr","res","delay","timeout","f","clearTimeout","setTimeout","runAgainArgs","running","image"],"sourceRoot":""}